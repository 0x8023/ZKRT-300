C51 COMPILER V9.01   8023                                                                  02/28/2015 13:07:32 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE 8023
OBJECT MODULE PLACED IN .\output\8023.obj
COMPILER INVOKED BY: H:\Program\keil\C51\BIN\C51.EXE program\8023.c DEBUG OBJECTEXTEND PRINT(.\8023.lst) OBJECT(.\output
                    -\8023.obj)

line level    source

   1          #include "./output/8023.h"
   2          xdata struct str_state str_begin,str_now,str_next;//分别为:起始状态/当前状态/目标状态
   3          void fun_delay(ui par_value,enum varENU_del par_model){
   4   1          ui loc_con=par_value;
   5   1          switch(par_model){
   6   2              case del_us://微秒级延时
   7   2                  while(loc_con-->0){
   8   3                      _nop_();
   9   3                      _nop_();
  10   3                  }
  11   2                  return;
  12   2              case del_ms://毫秒级延时
  13   2                  while(loc_con-->0){
  14   3                      uc loc_i, loc_j;
  15   3                      _nop_();
  16   3                      _nop_();
  17   3                      loc_i=12;
  18   3                      loc_j=168;
  19   3                      do{
  20   4                          while(--loc_j);
  21   4                      }while(--loc_i);
  22   3                  }
  23   2                  return;
  24   2              case del_s://秒级延时
  25   2                  while(loc_con-->0){
  26   3                      uc loc_i, loc_j, loc_k;
  27   3                      loc_i=46;
  28   3                      loc_j=153;
  29   3                      loc_k=245;
  30   3                      do{
  31   4                          do{
  32   5                              while(--loc_k);
  33   5                          }while(--loc_j);
  34   4                      }while(--loc_i);
  35   3                  }
  36   2                  return;
  37   2              default:return;
  38   2          }
  39   1      }//延时
  40          void fun_timer0init(){
  41   1          AUXR&=0x7F;
  42   1          TMOD&=0xF0;
  43   1          TMOD|=0x01;
  44   1          TL0=0xB0;
  45   1          TH0=0x3C;
  46   1          TF0=0;
  47   1      }//50毫秒定时器0初始化
  48          void fun_timer1init(){
  49   1          AUXR&=0xBF;
  50   1          TMOD&=0x0F;
  51   1          TMOD|=0x10;
  52   1          TL1=0xE0;
  53   1          TH1=0xB1;
  54   1          TF1=0;
C51 COMPILER V9.01   8023                                                                  02/28/2015 13:07:32 PAGE 2   

  55   1      }//20毫秒定时器1初始化
  56          void fun_timer0(){
  57   1          TL0=0xB0;
  58   1          TH0=0x3C;
  59   1          _nop_();
  60   1      }//50毫秒定时器0处理函数
  61          void fun_timer1(){
  62   1          TL1=0xE0;
  63   1          TH1=0xB1;
  64   1          _nop_();
  65   1      }//20毫秒定时器1处理函数
  66          void fun_wait(){
  67   1          while(in_start==1);
  68   1          fun_delay(20,del_ms);
  69   1          while(in_start==0);
  70   1          fun_delay(256,del_ms);
  71   1      }//等待按键
  72          void fun_select(enum varENU_sel par_model){
  73   1          if(par_model==sel_58)
  74   1              out_switchselect=0;
  75   1          else if(par_model==sel_912)
  76   1              out_switchselect=1;
  77   1      }//传感器片选
  78          void fun_initialization(){
  79   1          CLK_DIV=0x00;//不分频
  80   1      
  81   1          P0M1=0xff;//P0用于输入
  82   1          P0M0=0x00;//P0不能输出
  83   1          
  84   1          P1M1=0x00;//P1口0-1双向，2中断输入，3-6输入，7输出
  85   1          P1M0=0xfc;//P1口2-7输出
  86   1      
  87   1          P2M1=0xf0;//P2口4-7输入
  88   1          P2M0=0x0f;//P2口0-3输出
  89   1      
  90   1          //PS_2=1;//手抓松传感器置1 $?$
  91   1          //PS_11=1;//升降位置3传感器置1 $?$
  92   1      
  93   1          out_en1=1;//电机1/3使能 $?$
  94   1          out_en2=1;//电机2/4使能 $?$
  95   1          out_motorselect=1;//电机片选为1 $?$
  96   1          fun_delay(del_ms,1);//延时1毫秒 $?$
  97   1          out_motorselect=0;//电机片选为0 $?$
  98   1          //PS_5=PS_1;// $?$
  99   1      
 100   1          fun_pwminit();//PWM的初始化设置
 101   1          fun_timer0init();//初始化定时器0
 102   1          fun_timer1init();//初始化定时器1
 103   1          in_start=1;//按键置1
 104   1      
 105   1          fun_wait();
 106   1      }//初始化
 107          void fun_pwminit(){
 108   1          CCON=0x00;
 109   1          CH=0;
 110   1          CL=0;
 111   1          CMOD=0x00;
 112   1      }//PWM初始化
 113          void fun_pwmr(uc par_value){
 114   1          CCAP0H=CCAP0L=par_value*2.5;//控制输出的占空比
 115   1          CCAPM0=0X42;//8位PWM输出，无中断
 116   1          PCA_PWM0=0x00;
C51 COMPILER V9.01   8023                                                                  02/28/2015 13:07:32 PAGE 3   

 117   1      }//右路PWM输出
 118          void fun_pwml(uc par_value){
 119   1          CCAP1H=CCAP1L=par_value*2.5;//控制输出的占空比
 120   1          CCAPM1=0X42;//8位PWM输出，无中断
 121   1          PCA_PWM1=0x00;
 122   1      }//左路PWM输出
 123          void fun_startdj(enum varENU_mot par_model,char par_speed){
 124   1          if(par_speed==0)
 125   1              return;
 126   1          else if(par_speed>100)
 127   1              par_speed=100;
 128   1          else if(par_speed<-100)
 129   1              par_speed=-100;
 130   1          switch(par_model){
 131   2              case mot_l://左轮电机
 132   2                  CR=1;
 133   2                  if(par_speed>0){
 134   3                      fun_pwml(par_speed);out_pwml=0;
 135   3                  }
 136   2                  else if(par_speed<0){
 137   3                      fun_pwml(cabs(par_speed));out_pwml=1;
 138   3                  }
 139   2                  break;
 140   2              case mot_r://右轮电机
 141   2                  CR=1;
 142   2                  if(par_speed>0){
 143   3                      fun_pwmr(par_speed);out_pwmr=0;
 144   3                  }
 145   2                  else if(par_speed<0){
 146   3                      fun_pwmr(cabs(par_speed));out_pwmr=1;
 147   3                  }
 148   2                  break;
 149   2              case mot_rl://左右轮同步
 150   2                  CR=1;
 151   2                  if(par_speed>0){
 152   3                      fun_pwml(par_speed);out_pwml=0;
 153   3                      fun_pwmr(par_speed);out_pwmr=0;
 154   3                  }
 155   2                  else if(par_speed<0){
 156   3                      fun_pwml(cabs(par_speed));out_pwml=1;
 157   3                      fun_pwmr(cabs(par_speed));out_pwmr=1;
 158   3                  }
 159   2                  break;
 160   2              case mot_dj1://正转为抓紧，反转为松开
 161   2                  out_motorselect=1;
 162   2                  if(par_speed>0)
 163   2                      out_dir1=1;
 164   2                  else if(par_speed<0)
 165   2                      out_dir1=0;
 166   2                  out_en1=0;
 167   2                  break;
 168   2              case mot_dj2://正转是向无电机一方转,反转为向有电机一方转
 169   2                  out_motorselect=1;
 170   2                  if(par_speed>0)
 171   2                      out_dir2=1;
 172   2                  else if(par_speed<0)
 173   2                      out_dir2=0;
 174   2                  out_en2=0;
 175   2                  break;
 176   2              case mot_dj3://向上为正转,向下为反转
 177   2                  out_motorselect=0;
 178   2                  if(par_speed>0)
C51 COMPILER V9.01   8023                                                                  02/28/2015 13:07:32 PAGE 4   

 179   2                      out_dir1=0;
 180   2                  else if(par_speed<0)
 181   2                      out_dir1=1;
 182   2                  out_en1=0;
 183   2                  break;
 184   2              case mot_dj4://顺时针为正转,逆时针为反转
 185   2                  out_motorselect=0;
 186   2                  if(par_speed>0)
 187   2                      out_dir2=0;
 188   2                  else if(par_speed<0)
 189   2                      out_dir2=1;
 190   2                  out_en2=0;
 191   2                  break;
 192   2              default:
 193   2                  break;
 194   2          }
 195   1      }//启动电机
 196          void fun_stop(enum varENU_mot par_model){
 197   1          switch(par_model){
 198   2              case mot_l:
 199   2                  fun_pwml(0);out_pwml=0;break;
 200   2              case mot_r:
 201   2                  fun_pwmr(0);out_pwmr=0;break;
 202   2              case mot_rl:
 203   2                  CR=0;
 204   2                  fun_pwmr(0);out_pwmr=0;
 205   2                  fun_pwml(0);out_pwml=0;
 206   2                  break;
 207   2              case mot_dj1:
 208   2                  out_motorselect=1;out_dir1=0;out_en1=1;break;
 209   2              case mot_dj2:
 210   2                  out_motorselect=1;out_dir2=0;out_en2=1;break;
 211   2              case mot_dj3:
 212   2                  out_motorselect=0;out_dir1=0;out_en1=1;break;
 213   2              case mot_dj4:
 214   2                  out_motorselect=0;out_dir2=0;out_en2=1;break;
 215   2              default:
 216   2                  break;
 217   2          }
 218   1      }//停止电机
 219          void fun_sz1(enum varENU_han par_model){
 220   1          if(par_model==han_s){//手抓松
 221   2              while(1){
 222   3                  fun_startdj(mot_dj1,-100);
 223   3                  while(in_s==1);
 224   3                  fun_delay(20,del_ms);
 225   3                  if(in_s==0)
 226   3                      break;
 227   3              }
 228   2          }
 229   1          else{//手抓紧
 230   2              while(1){
 231   3                  fun_startdj(mot_dj1,100);
 232   3                  while(in_j==1);
 233   3                  fun_delay(20,del_ms);
 234   3                  if(in_j==0)
 235   3                      break;
 236   3              }
 237   2          }
 238   1          fun_stop(mot_dj1);
 239   1          str_begin.szzt=par_model;//存储运行结果
 240   1      }//手抓单步运动
C51 COMPILER V9.01   8023                                                                  02/28/2015 13:07:32 PAGE 5   

 241          void fun_sj1(enum varENU_sjp par_model){
 242   1          switch(par_model){
 243   2              case sjp_wz1://升降位置1(最上位)
 244   2                  while(1){//只有向上
 245   3                      fun_startdj(mot_dj3,100);
 246   3                      fun_select(sel_58);
 247   3                      fun_delay(50,del_ms);
 248   3                      while(in_wz1==1);
 249   3                      fun_delay(50,del_ms);
 250   3                      if(in_wz1==0)
 251   3                          break;
 252   3                  }
 253   2                  break;
 254   2              case sjp_wz2://升降位置2
 255   2                  if(par_model>str_begin.sjwz){
 256   3                      while(1){//要去的地方比较靠下,向下走
 257   4                          fun_startdj(mot_dj3,-100);
 258   4                          fun_select(sel_58);
 259   4                          fun_delay(50,del_ms);
 260   4                          while(in_wz2==1);
 261   4                          fun_delay(50,del_ms);
 262   4                          if(in_wz2==0)
 263   4                              break;
 264   4                      }
 265   3                  }
 266   2                  else{//要去的地方在上面，向上走
 267   3                      while(1){
 268   4                          fun_startdj(mot_dj3,100);
 269   4                          fun_select(sel_58);
 270   4                          fun_delay(50,del_ms);
 271   4                          while(in_wz2==1);
 272   4                          fun_delay(50,del_ms);
 273   4                          if(in_wz2==0)
 274   4                              break;
 275   4                      }
 276   3                  }
 277   2                  break;
 278   2              case sjp_wz3://升降位置3
 279   2                  if(par_model>str_begin.sjwz){
 280   3                      while(1){//要去的地方比较靠下,向下走
 281   4                          fun_startdj(mot_dj3,-100);
 282   4                          fun_select(sel_58);
 283   4                          fun_delay(50,del_ms);
 284   4                          while(in_wz3==1);
 285   4                          fun_delay(50,del_ms);
 286   4                          if(in_wz3==0)
 287   4                              break;
 288   4                      }
 289   3                  }
 290   2                  else{//要去的地方在上面，向上走
 291   3                      while(1){
 292   4                          fun_startdj(mot_dj3,100);
 293   4                          fun_select(sel_58);
 294   4                          fun_delay(50,del_ms);
 295   4                          while(in_wz3==1);
 296   4                          fun_delay(50,del_ms);
 297   4                          if(in_wz3==0)
 298   4                              break;
 299   4                      }
 300   3                  }
 301   2                  break;
 302   2              case sjp_wz4://升降位置4
C51 COMPILER V9.01   8023                                                                  02/28/2015 13:07:32 PAGE 6   

 303   2                  if(par_model>str_begin.sjwz){
 304   3                      while(1){//要去的地方比较靠下,向下走
 305   4                          fun_startdj(mot_dj3,-100);
 306   4                          fun_select(sel_58);
 307   4                          fun_delay(50,del_ms);
 308   4                          while(in_wz4==1);
 309   4                          fun_delay(50,del_ms);
 310   4                          if(in_wz4==0)
 311   4                              break;
 312   4                      }
 313   3                  }
 314   2                  else{//要去的地方在上面，向上走
 315   3                      while(1){
 316   4                          fun_startdj(mot_dj3,100);
 317   4                          fun_select(sel_58);
 318   4                          fun_delay(50,del_ms);
 319   4                          while(in_wz4==1);
 320   4                          fun_delay(50,del_ms);
 321   4                          if(in_wz4==0)
 322   4                              break;
 323   4                      }
 324   3                  }
 325   2                  break;
 326   2              case sjp_wz5://升降位置5
 327   2                  while(1){//要去的地方比较靠下,向下走
 328   3                      fun_startdj(mot_dj3,-100);
 329   3                      fun_select(sel_912);
 330   3                      fun_delay(50,del_ms);
 331   3                      while(in_wz5==1);
 332   3                      fun_delay(50,del_ms);
 333   3                      if(in_wz5==0){
 334   4                          break;
 335   4                      }
 336   3                  }
 337   2                  break;
 338   2              default:
 339   2                  break;
 340   2          }
 341   1          fun_stop(mot_dj3);
 342   1          str_begin.sjwz=par_model;//存储运行结果
 343   1      }//升降单步运动
 344          void fun_py1(enum varENU_tra par_model){
 345   1          switch(par_model){
 346   2              case tra_q://前平移(没有电机的呢个方向)
 347   2                  while(1){
 348   3                      fun_startdj(mot_dj2,100);
 349   3                      while(in_qpy==1);
 350   3                      fun_delay(20,del_ms);
 351   3                      if(in_qpy==0)
 352   3                          break;
 353   3                  }
 354   2                  break;
 355   2              case tra_h://后平移(有电机的呢个方向)
 356   2                  while(1){
 357   3                      fun_startdj(mot_dj2,-100);
 358   3                      while(in_hpy==1);
 359   3                      fun_delay(20,del_ms);
 360   3                      if(in_hpy==0)
 361   3                          break;
 362   3                  }
 363   2                  break;
 364   2              default:
C51 COMPILER V9.01   8023                                                                  02/28/2015 13:07:32 PAGE 7   

 365   2                  break;
 366   2          }
 367   1          fun_stop(mot_dj2);
 368   1          str_begin.pywz=par_model;//存储运行结果
 369   1      }//平移单步运动
 370          void fun_hz1(enum varENU_dir par_model){
 371   1          switch(par_model){
 372   2              case dir_up://回转至前方
 373   2                  switch(str_begin.hzfx){
 374   3                      case dir_down://现在在下方
 375   3                          fun_startdj(mot_dj4,-100);
 376   3                          fun_select(sel_912);
 377   3                          fun_delay(1,del_s);
 378   3                          while(1){
 379   4                              while(in_hz==1);
 380   4                              fun_delay(25,del_ms);
 381   4                              if(in_hz==0)
 382   4                                  break;
 383   4                          }
 384   3                          while(1){
 385   4                              while(in_hz==0);
 386   4                              fun_delay(25,del_ms);
 387   4                              if(in_hz==1)
 388   4                                  break;
 389   4                          }
 390   3                          while(1){
 391   4                              while(in_hz==1);
 392   4                              fun_delay(25,del_ms);
 393   4                              if(in_hz==0)
 394   4                                  break;
 395   4                          }
 396   3                          break;
 397   3                      case dir_left://现在在左边
 398   3                          fun_startdj(mot_dj4,100);
 399   3                          fun_select(sel_912);
 400   3                          fun_delay(1,del_s);
 401   3                          while(1){
 402   4                              while(in_hz==1);
 403   4                              fun_delay(25,del_ms);
 404   4                              if(in_hz==0)
 405   4                                  break;
 406   4                          }
 407   3                          break;
 408   3                      case dir_right://现在在右边
 409   3                          fun_startdj(mot_dj4,-100);
 410   3                          fun_select(sel_912);
 411   3                          fun_delay(1,del_s);
 412   3                          while(1){
 413   4                              while(in_hz==1);
 414   4                              fun_delay(25,del_ms);
 415   4                              if(in_hz==0)
 416   4                                  break;
 417   4                          }
 418   3                          break;
 419   3                      default:
 420   3                          break;
 421   3                  }
 422   2                  break;
 423   2              case dir_down://要去下面
 424   2                  switch(str_begin.hzfx){
 425   3                      case dir_up://现在在上面
 426   3                          fun_startdj(mot_dj4,100);
C51 COMPILER V9.01   8023                                                                  02/28/2015 13:07:32 PAGE 8   

 427   3                          fun_select(sel_912);
 428   3                          fun_delay(1,del_s);
 429   3                          while(1){
 430   4                              while(in_hz==1);
 431   4                              fun_delay(25,del_ms);
 432   4                              if(in_hz==0)
 433   4                                  break;
 434   4                          }
 435   3                          while(1){
 436   4                              while(in_hz==0);
 437   4                              fun_delay(25,del_ms);
 438   4                              if(in_hz==1)
 439   4                                  break;
 440   4                          }
 441   3                          while(1){
 442   4                              while(in_hz==1);
 443   4                              fun_delay(25,del_ms);
 444   4                              if(in_hz==0)
 445   4                                  break;
 446   4                          }
 447   3                          break;
 448   3                      case dir_left://现在在左面
 449   3                          fun_startdj(mot_dj4,-100);
 450   3                          fun_select(sel_912);
 451   3                          fun_delay(1,del_s);
 452   3                          while(1){
 453   4                              while(in_hz==1);
 454   4                              fun_delay(25,del_ms);
 455   4                              if(in_hz==0)
 456   4                                  break;
 457   4                          }
 458   3                          break;
 459   3                      case dir_right://现在在右面
 460   3                          fun_startdj(mot_dj4,100);
 461   3                          fun_select(sel_912);
 462   3                          fun_delay(1,del_s);
 463   3                          while(1){
 464   4                              while(in_hz==1);
 465   4                              fun_delay(25,del_ms);
 466   4                              if(in_hz==0)
 467   4                                  break;
 468   4                          }
 469   3                          break;
 470   3                      default:
 471   3                          break;
 472   3                  }
 473   2                  break;
 474   2              case dir_left://要去左边
 475   2                  switch(str_begin.hzfx){
 476   3                      case dir_up://现在在上面
 477   3                          fun_startdj(mot_dj4,-100);
 478   3                          fun_select(sel_912);
 479   3                          fun_delay(1,del_s);
 480   3                          while(1){
 481   4                              while(in_hz==1);
 482   4                              fun_delay(25,del_ms);
 483   4                              if(in_hz==0)
 484   4                                  break;
 485   4                          }
 486   3                          break;
 487   3                      case dir_down://现在在下面
 488   3                          fun_startdj(mot_dj4,100);
C51 COMPILER V9.01   8023                                                                  02/28/2015 13:07:32 PAGE 9   

 489   3                          fun_select(sel_912);
 490   3                          fun_delay(1,del_s);
 491   3                          while(1){
 492   4                              while(in_hz==1);
 493   4                              fun_delay(25,del_ms);
 494   4                              if(in_hz==0)
 495   4                                  break;
 496   4                          }
 497   3                          break;
 498   3                      case dir_right://现在在右面
 499   3                          fun_startdj(mot_dj4,-100);
 500   3                          fun_select(sel_912);
 501   3                          fun_delay(1,del_s);
 502   3                          while(1){
 503   4                              while(in_hz==1);
 504   4                              fun_delay(25,del_ms);
 505   4                              if(in_hz==0)
 506   4                                  break;
 507   4                          }
 508   3                          while(1){
 509   4                              while(in_hz==0);
 510   4                              fun_delay(25,del_ms);
 511   4                              if(in_hz==1)
 512   4                                  break;
 513   4                          }
 514   3                          while(1){
 515   4                              while(in_hz==1);
 516   4                              fun_delay(25,del_ms);
 517   4                              if(in_hz==0){
 518   5                                  break;
 519   5                              }
 520   4                          }
 521   3                          break;
 522   3                      default:
 523   3                          break;
 524   3                  }
 525   2                  break;
 526   2              case dir_right://要去右面
 527   2                  switch(str_begin.hzfx){
 528   3                      case dir_up://现在在前面
 529   3                          fun_startdj(mot_dj4,100);
 530   3                          fun_select(sel_912);
 531   3                          fun_delay(1,del_s);
 532   3                          while(1){
 533   4                              while(in_hz==1);
 534   4                              fun_delay(25,del_ms);
 535   4                              if(in_hz==0)
 536   4                                  break;
 537   4                          }
 538   3                          break;
 539   3                      case dir_down://现在在下面
 540   3                          fun_startdj(mot_dj4,-100);
 541   3                          fun_select(sel_912);
 542   3                          fun_delay(1,del_s);
 543   3                          while(1){
 544   4                              while(in_hz==1);
 545   4                              fun_delay(25,del_ms);
 546   4                              if(in_hz==0)
 547   4                                  break;
 548   4                          }
 549   3                          break;
 550   3                      case dir_left://现在在左面
C51 COMPILER V9.01   8023                                                                  02/28/2015 13:07:32 PAGE 10  

 551   3                          fun_startdj(mot_dj4,100);
 552   3                          fun_select(sel_912);
 553   3                          fun_delay(1,del_s);
 554   3                          while(1){
 555   4                              while(in_hz==1);
 556   4                              fun_delay(25,del_ms);
 557   4                              if(in_hz==0)
 558   4                                  break;
 559   4                          }
 560   3                          while(1){
 561   4                              while(in_hz==0);
 562   4                              fun_delay(25,del_ms);
 563   4                              if(in_hz==1)
 564   4                                  break;
 565   4                          }
 566   3                          while(1){
 567   4                              while(in_hz==1);
 568   4                              fun_delay(25,del_ms);
 569   4                              if(in_hz==0){
 570   5                                  break;
 571   5                              }
 572   4                          }
 573   3                          break;
 574   3                      default:
 575   3                          break;
 576   3                  }
 577   2                  break;
 578   2              default:
 579   2                  break;
 580   2          }
 581   1          fun_stop(mot_dj4);
 582   1          str_begin.hzfx=par_model;//存储运行结果
 583   1      }//回转单步运动
 584          void fun_mline(uc par_num,uc par_sd){
 585   1          uc loc_i,loc_con=0;
 586   1          uc loc_l=par_sd,loc_r=par_sd;
 587   1          for(loc_i=0;loc_i<par_sd;loc_i++){//软起动
 588   2              fun_delay(8,del_ms);
 589   2              fun_startdj(mot_rl,loc_i);
 590   2          }
 591   1          while(1){
 592   2              if(in_ls3){//纠偏
 593   3                  loc_l*=0.9;
 594   3                  loc_r*=1.1;
 595   3              }
 596   2              if(in_ls6){
 597   3                  loc_l*=1.1;
 598   3                  loc_r*=0.9;
 599   3              }  
 600   2              if(in_ls2){
 601   3                  loc_l*=0.8;
 602   3                  loc_r*=1.2;
 603   3              }
 604   2              if(in_ls7){
 605   3                  loc_l*=1.2;
 606   3                  loc_r*=0.8;
 607   3              }        
 608   2              if(in_ls1){
 609   3                  loc_l*=0.7;
 610   3                  loc_r*=1.3;
 611   3              }
 612   2              if(in_ls8){
C51 COMPILER V9.01   8023                                                                  02/28/2015 13:07:32 PAGE 11  

 613   3                  loc_l*=1.3;
 614   3                  loc_r*=0.7;
 615   3              }
 616   2              fun_startdj(mot_l,loc_l);//更新电机参数
 617   2              fun_startdj(mot_r,loc_r);
 618   2              if((in_ls1&&in_ls7)||(in_ls2&&in_ls8)){//巡线计数
 619   3                  while((in_ls1&&in_ls7)||(in_ls2&&in_ls8));
 620   3                  fun_delay(10,del_ms);
 621   3                  if((!in_ls1&&!in_ls7)||(!in_ls2&&!in_ls8)){
 622   4                      if(++loc_con>=par_num){
 623   5                          fun_stop(mot_rl);
 624   5                          return;
 625   5                      }                
 626   4                  }
 627   3              }
 628   2              loc_l=par_sd;//恢复默认参数
 629   2              loc_r=par_sd;
 630   2          }
 631   1      }//主函数巡线


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   2146    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =     21    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      14
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
