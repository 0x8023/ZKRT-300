C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE 8023
OBJECT MODULE PLACED IN .\output\8023.obj
COMPILER INVOKED BY: H:\Program\keil\C51\BIN\C51.EXE program\8023.c DEBUG OBJECTEXTEND PRINT(.\8023.lst) OBJECT(.\output
                    -\8023.obj)

line level    source

   1          #include "./output/8023.h"
   2          xdata struct str_state str_begin,str_now,str_next;//ÂàÜÂà´‰∏∫:Ëµ∑ÂßãÁä∂ÊÄÅ/ÂΩìÂâçÁä∂ÊÄÅ/ÁõÆÊ†áÁä∂ÊÄÅ
   3          xdata struct str_parameter str_cod={
   4              /*ui str_cod.mlinerqd*/25000,//ÈªòËÆ§‰∏ªÂáΩÊï∞Â∑°Á∫øËΩØËµ∑Âä®Ë∑ØÁ®ã‰∏∫25000
   5              /*ui str_cod.mlineqc*/200,//ÈªòËÆ§‰∏ªÂáΩÊï∞Â∑°Á∫øÂâçÂÜ≤Êó∂Èó¥‰∏∫500ÊØ´Áßí
   6          
   7              /*ui str_cod.sj1bzw*/58,
   8              /*ui str_cod.sj1zjw*/800,
   9          
  10              /*ui str_cod.py1qkq*/666,
  11              /*ui str_cod.py1kqz*/684,
  12              /*ui str_cod.py1zkh*/684,
  13              /*ui str_cod.py1khh*/666,
  14              /*ui str_cod.py1qz*/500,
  15              /*ui str_cod.py1zh*/500,
  16              /*ui str_cod.py1kqkh*/1480,
  17              /*ui str_cod.py1qkh*/2122,
  18              /*ui str_cod.py1kqh*/2122,
  19          };
  20          ui var_timer0=0;
  21          void fun_delay(ui par_value,enum varENU_del par_model){
  22   1          ui loc_con=par_value;
  23   1          switch(par_model){
  24   2              case del_us://ÂæÆÁßíÁ∫ßÂª∂Êó∂
  25   2                  while(loc_con-->0){
  26   3                      _nop_();
  27   3                      _nop_();
  28   3                  }
  29   2                  return;
  30   2              case del_ms://ÊØ´ÁßíÁ∫ßÂª∂Êó∂
  31   2                  while(loc_con-->0){
  32   3                      uc loc_i, loc_j;
  33   3                      _nop_();
  34   3                      _nop_();
  35   3                      loc_i=12;
  36   3                      loc_j=168;
  37   3                      do{
  38   4                          while(--loc_j);
  39   4                      }while(--loc_i);
  40   3                  }
  41   2                  return;
  42   2              case del_s://ÁßíÁ∫ßÂª∂Êó∂
  43   2                  while(loc_con-->0){
  44   3                      uc loc_i, loc_j, loc_k;
  45   3                      loc_i=46;
  46   3                      loc_j=153;
  47   3                      loc_k=245;
  48   3                      do{
  49   4                          do{
  50   5                              while(--loc_k);
  51   5                          }while(--loc_j);
  52   4                      }while(--loc_i);
  53   3                  }
  54   2                  return;
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 2   

  55   2              default:return;
  56   2          }
  57   1      }//Âª∂Êó∂
  58          void fun_timer0init(){
  59   1          AUXR|=0x80;       //ÂÆöÊó∂Âô®Êó∂Èíü1TÊ®°Âºè
  60   1          TMOD&=0xF0;       //ËÆæÁΩÆÂÆöÊó∂Âô®Ê®°Âºè
  61   1          TMOD|=0x01;       //ËÆæÁΩÆÂÆöÊó∂Âô®Ê®°Âºè
  62   1          TL0=0x20;     //ËÆæÁΩÆÂÆöÊó∂ÂàùÂÄº
  63   1          TH0=0xD1;     //ËÆæÁΩÆÂÆöÊó∂ÂàùÂÄº
  64   1          TF0=0;        //Ê∏ÖÈô§TF0Ê†áÂøó
  65   1          ET0=1;
  66   1          EA=1;
  67   1      }//1ÊØ´ÁßíÂÆöÊó∂Âô®0ÂàùÂßãÂåñ
  68          void fun_timer1init(){
  69   1          AUXR&=0xBF;
  70   1          TMOD&=0x0F;
  71   1          TMOD|=0x10;
  72   1          TL1=0xE0;
  73   1          TH1=0xB1;
  74   1          TF1=0;
  75   1          ET1=1;
  76   1          EA=1;
  77   1      }//20ÊØ´ÁßíÂÆöÊó∂Âô®1ÂàùÂßãÂåñ
  78          void fun_timer0(){
  79   1          TL0=0x20;
  80   1          TH0=0xD1;
  81   1          _nop_();
  82   1          var_timer0++;
  83   1      }//1ÊØ´ÁßíÂÆöÊó∂Âô®0Â§ÑÁêÜÂáΩÊï∞
  84          void fun_timer1(){
  85   1          TL1=0xE0;
  86   1          TH1=0xB1;
  87   1          _nop_();
  88   1      }//20ÊØ´ÁßíÂÆöÊó∂Âô®1Â§ÑÁêÜÂáΩÊï∞
  89          void fun_wait(){
  90   1          while(in_start==1);
  91   1          fun_delay(20,del_ms);
  92   1          while(in_start==0);
  93   1          fun_delay(256,del_ms);
  94   1      }//Á≠âÂæÖÊåâÈîÆ
  95          void fun_select(enum varENU_sel par_model){
  96   1          if(par_model==sel_58)
  97   1              out_switchselect=0;
  98   1          else if(par_model==sel_912)
  99   1              out_switchselect=1;
 100   1      }//‰º†ÊÑüÂô®ÁâáÈÄâ
 101          void fun_initialization(){
 102   1          CLK_DIV=0x00;//‰∏çÂàÜÈ¢ë
 103   1      
 104   1          P0M1=0xff;//P0Áî®‰∫éËæìÂÖ•
 105   1          P0M0=0x00;//P0‰∏çËÉΩËæìÂá∫
 106   1          
 107   1          P1M1=0x00;//P1Âè£0-1ÂèåÂêëÔºå2‰∏≠Êñ≠ËæìÂÖ•Ôºå3-6ËæìÂÖ•Ôºå7ËæìÂá∫
 108   1          P1M0=0xfc;//P1Âè£2-7ËæìÂá∫
 109   1      
 110   1          P2M1=0xf0;//P2Âè£4-7ËæìÂÖ•
 111   1          P2M0=0x0f;//P2Âè£0-3ËæìÂá∫
 112   1      
 113   1          //PS_2=1;//ÊâãÊäìÊùæ‰º†ÊÑüÂô®ÁΩÆ1 $?$
 114   1          //PS_11=1;//ÂçáÈôç‰ΩçÁΩÆ3‰º†ÊÑüÂô®ÁΩÆ1 $?$
 115   1      
 116   1          out_en1=1;//ÁîµÊú∫1/3‰ΩøËÉΩ $?$
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 3   

 117   1          out_en2=1;//ÁîµÊú∫2/4‰ΩøËÉΩ $?$
 118   1          //out_motorselect=1;//ÁîµÊú∫ÁâáÈÄâ‰∏∫1 $?$
 119   1          //fun_delay(del_ms,1);//Âª∂Êó∂1ÊØ´Áßí $?$
 120   1          out_motorselect=0;//ÁîµÊú∫ÁâáÈÄâ‰∏∫0 $?$
 121   1          //PS_5=PS_1;// $?$
 122   1      
 123   1          fun_pwminit();//PWMÁöÑÂàùÂßãÂåñËÆæÁΩÆ
 124   1          fun_timer0init();//ÂàùÂßãÂåñÂÆöÊó∂Âô®0
 125   1          fun_timer1init();//ÂàùÂßãÂåñÂÆöÊó∂Âô®1
 126   1          fun_port();//ÂàùÂßãÂåñ‰∏≤Âè£
 127   1          in_start=1;//ÊåâÈîÆÁΩÆ1
 128   1      
 129   1          fun_wait();
 130   1      }//ÂàùÂßãÂåñ
 131          void fun_pwminit(){
 132   1          CCON=0x00;
 133   1          CH=0;
 134   1          CL=0;
 135   1          CMOD=0x00;
 136   1      }//PWMÂàùÂßãÂåñ
 137          void fun_pwmr(uc par_value){
 138   1          CCAP0H=CCAP0L=par_value*2.5;//ÊéßÂà∂ËæìÂá∫ÁöÑÂç†Á©∫ÊØî
 139   1          CCAPM0=0X42;//8‰ΩçPWMËæìÂá∫ÔºåÊó†‰∏≠Êñ≠
 140   1          PCA_PWM0=0x00;
 141   1      }//Âè≥Ë∑ØPWMËæìÂá∫
 142          void fun_pwml(uc par_value){
 143   1          CCAP1H=CCAP1L=par_value*2.5;//ÊéßÂà∂ËæìÂá∫ÁöÑÂç†Á©∫ÊØî
 144   1          CCAPM1=0X42;//8‰ΩçPWMËæìÂá∫ÔºåÊó†‰∏≠Êñ≠
 145   1          PCA_PWM1=0x00;
 146   1      }//Â∑¶Ë∑ØPWMËæìÂá∫
 147          void fun_startdj(enum varENU_mot par_model,char par_speed){
 148   1          if(par_speed==0)
 149   1              return;
 150   1          else if(par_speed>100)
 151   1              par_speed=100;
 152   1          else if(par_speed<-100)
 153   1              par_speed=-100;
 154   1          switch(par_model){
 155   2              case mot_l://Â∑¶ËΩÆÁîµÊú∫
 156   2                  CR=1;
 157   2                  if(par_speed>0){
 158   3                      fun_pwml(par_speed);out_pwml=0;
 159   3                  }
 160   2                  else if(par_speed<0){
 161   3                      fun_pwml(cabs(par_speed));out_pwml=1;
 162   3                  }
 163   2                  break;
 164   2              case mot_r://Âè≥ËΩÆÁîµÊú∫
 165   2                  CR=1;
 166   2                  if(par_speed>0){
 167   3                      fun_pwmr(par_speed);out_pwmr=0;
 168   3                  }
 169   2                  else if(par_speed<0){
 170   3                      fun_pwmr(cabs(par_speed));out_pwmr=1;
 171   3                  }
 172   2                  break;
 173   2              case mot_rl://Â∑¶Âè≥ËΩÆÂêåÊ≠•
 174   2                  CR=1;
 175   2                  if(par_speed>0){
 176   3                      fun_pwml(par_speed);out_pwml=0;
 177   3                      fun_pwmr(par_speed);out_pwmr=0;
 178   3                  }
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 4   

 179   2                  else if(par_speed<0){
 180   3                      fun_pwml(cabs(par_speed));out_pwml=1;
 181   3                      fun_pwmr(cabs(par_speed));out_pwmr=1;
 182   3                  }
 183   2                  break;
 184   2              case mot_dj1://Ê≠£ËΩ¨‰∏∫ÊäìÁ¥ßÔºåÂèçËΩ¨‰∏∫ÊùæÂºÄ
 185   2                  out_motorselect=1;
 186   2                  if(par_speed>0)
 187   2                      out_dir1=1;
 188   2                  else if(par_speed<0)
 189   2                      out_dir1=0;
 190   2                  out_en1=0;
 191   2                  break;
 192   2              case mot_dj2://Ê≠£ËΩ¨ÊòØÂêëÊó†ÁîµÊú∫‰∏ÄÊñπËΩ¨,ÂèçËΩ¨‰∏∫ÂêëÊúâÁîµÊú∫‰∏ÄÊñπËΩ¨
 193   2                  out_motorselect=1;
 194   2                  if(par_speed>0)
 195   2                      out_dir2=1;
 196   2                  else if(par_speed<0)
 197   2                      out_dir2=0;
 198   2                  out_en2=0;
 199   2                  break;
 200   2              case mot_dj3://Âêë‰∏ä‰∏∫Ê≠£ËΩ¨,Âêë‰∏ã‰∏∫ÂèçËΩ¨
 201   2                  out_motorselect=0;
 202   2                  if(par_speed>0)
 203   2                      out_dir1=0;
 204   2                  else if(par_speed<0)
 205   2                      out_dir1=1;
 206   2                  out_en1=0;
 207   2                  break;
 208   2              case mot_dj4://È°∫Êó∂Èíà‰∏∫Ê≠£ËΩ¨,ÈÄÜÊó∂Èíà‰∏∫ÂèçËΩ¨
 209   2                  out_motorselect=0;
 210   2                  if(par_speed>0)
 211   2                      out_dir2=0;
 212   2                  else if(par_speed<0)
 213   2                      out_dir2=1;
 214   2                  out_en2=0;
 215   2                  break;
 216   2              default:
 217   2                  break;
 218   2          }
 219   1      }//ÂêØÂä®ÁîµÊú∫
 220          void fun_stop(enum varENU_mot par_model){
 221   1          switch(par_model){
 222   2              case mot_l:
 223   2                  fun_pwml(0);out_pwml=0;break;
 224   2              case mot_r:
 225   2                  fun_pwmr(0);out_pwmr=0;break;
 226   2              case mot_rl:
 227   2                  CR=0;
 228   2                  fun_pwmr(0);out_pwmr=0;
 229   2                  fun_pwml(0);out_pwml=0;
 230   2                  break;
 231   2              case mot_dj1:
 232   2                  out_motorselect=1;out_dir1=0;out_en1=1;break;
 233   2              case mot_dj2:
 234   2                  out_motorselect=1;out_dir2=0;out_en2=1;break;
 235   2              case mot_dj3:
 236   2                  out_motorselect=0;out_dir1=0;out_en1=1;break;
 237   2              case mot_dj4:
 238   2                  out_motorselect=0;out_dir2=0;out_en2=1;break;
 239   2              default:
 240   2                  break;
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 5   

 241   2          }
 242   1      }//ÂÅúÊ≠¢ÁîµÊú∫
 243          void fun_sz1(enum varENU_han par_model){
 244   1          if(par_model==han_s){//ÊâãÊäìÊùæ
 245   2              while(1){
 246   3                  fun_startdj(mot_dj1,-100);
 247   3                  while(in_s==1);
 248   3                  fun_delay(20,del_ms);
 249   3                  if(in_s==0)
 250   3                      break;
 251   3              }
 252   2          }
 253   1          else{//ÊâãÊäìÁ¥ß
 254   2              while(1){
 255   3                  fun_startdj(mot_dj1,100);
 256   3                  while(in_j==1);
 257   3                  fun_delay(20,del_ms);
 258   3                  if(in_j==0)
 259   3                      break;
 260   3              }
 261   2          }
 262   1          fun_stop(mot_dj1);
 263   1          str_begin.szzt=par_model;//Â≠òÂÇ®ËøêË°åÁªìÊûú
 264   1      }//ÊâãÊäìÂçïÊ≠•ËøêÂä®
 265          void fun_sj1(enum varENU_sjp par_model){
 266   1          if(par_model==str_begin.sjwz)
 267   1             return;
 268   1          switch(par_model){
 269   2              case sjp_wz1://ÂçáÈôç‰ΩçÁΩÆ1(ÊúÄ‰∏ä‰Ωç)
 270   2                  fun_startdj(mot_dj3,100);
 271   2                  fun_select(sel_58);
 272   2                  fun_delay(50,del_ms);
 273   2                  while(1){//Âè™ÊúâÂêë‰∏ä
 274   3                      while(in_wz1==1);
 275   3                      fun_delay(20,del_ms);
 276   3                      if(in_wz1==0){
 277   4                          fun_delay(20,del_ms);
 278   4                          break;                    
 279   4                      }
 280   3                  }
 281   2                  break;
 282   2              case sjp_wz12:
 283   2                  if(par_model>str_begin.sjwz){
 284   3                      fun_startdj(mot_dj3,-100);
 285   3                      fun_delay(str_cod.sj1zjw,del_ms);
 286   3                  }
 287   2                  else{//Ë¶ÅÂéªÁöÑÂú∞ÊñπÂú®‰∏äÈù¢ÔºåÂêë‰∏äËµ∞
 288   3                      fun_sj1(sjp_wz2);
 289   3                      fun_startdj(mot_dj3,100);
 290   3                      fun_delay(str_cod.sj1zjw,del_ms);
 291   3                  }
 292   2                  break;
 293   2              case sjp_wz2://ÂçáÈôç‰ΩçÁΩÆ2
 294   2                  if(par_model>str_begin.sjwz)
 295   2                      fun_startdj(mot_dj3,-100);
 296   2                  else
 297   2                      fun_startdj(mot_dj3,100);
 298   2                  fun_select(sel_58);
 299   2                  fun_delay(50,del_ms);
 300   2                  while(1){//Ë¶ÅÂéªÁöÑÂú∞ÊñπÊØîËæÉÈù†‰∏ã,Âêë‰∏ãËµ∞                    
 301   3                      while(in_wz2==1);
 302   3                      fun_delay(20,del_ms);
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 6   

 303   3                      if(in_wz2==0){
 304   4                          fun_delay(str_cod.sj1bzw,del_ms);
 305   4                          break;
 306   4                      }
 307   3                  }
 308   2                  break;
 309   2              case sjp_wz23:
 310   2                  if(par_model>str_begin.sjwz){
 311   3                      fun_sj1(sjp_wz2);
 312   3                      fun_startdj(mot_dj3,-100);
 313   3                      fun_delay(str_cod.sj1zjw,del_ms);
 314   3                  }
 315   2                  else{//Ë¶ÅÂéªÁöÑÂú∞ÊñπÂú®‰∏äÈù¢ÔºåÂêë‰∏äËµ∞
 316   3                      fun_sj1(sjp_wz3);
 317   3                      fun_startdj(mot_dj3,100);
 318   3                      fun_delay(str_cod.sj1zjw,del_ms);
 319   3                  }
 320   2                  break;
 321   2              case sjp_wz3://ÂçáÈôç‰ΩçÁΩÆ3
 322   2                  if(par_model>str_begin.sjwz)
 323   2                      fun_startdj(mot_dj3,-100);
 324   2                  else
 325   2                      fun_startdj(mot_dj3,100);
 326   2                  fun_select(sel_58);
 327   2                  fun_delay(50,del_ms);
 328   2                  while(1){
 329   3                      while(in_wz3==1);
 330   3                      fun_delay(str_cod.sj1bzw,del_ms);
 331   3                      if(in_wz3==0)
 332   3                          break;
 333   3                  }
 334   2                  break;
 335   2              case sjp_wz34:
 336   2                  if(par_model>str_begin.sjwz){
 337   3                      fun_sj1(sjp_wz3);
 338   3                      fun_startdj(mot_dj3,-100);
 339   3                      fun_delay(str_cod.sj1zjw,del_ms);
 340   3                  }
 341   2                  else{//Ë¶ÅÂéªÁöÑÂú∞ÊñπÂú®‰∏äÈù¢ÔºåÂêë‰∏äËµ∞
 342   3                      fun_sj1(sjp_wz4);
 343   3                      fun_startdj(mot_dj3,100);
 344   3                      fun_delay(str_cod.sj1zjw,del_ms);
 345   3                  }
 346   2                  break;
 347   2              case sjp_wz4://ÂçáÈôç‰ΩçÁΩÆ4
 348   2                  if(par_model>str_begin.sjwz)
 349   2                      fun_startdj(mot_dj3,-100);
 350   2                  else
 351   2                      fun_startdj(mot_dj3,100);
 352   2                  fun_select(sel_58);
 353   2                  fun_delay(50,del_ms);
 354   2                  while(1){
 355   3                      while(in_wz4==1);
 356   3                      fun_delay(str_cod.sj1bzw,del_ms);
 357   3                      if(in_wz4==0)
 358   3                          break;
 359   3                  }
 360   2                  break;
 361   2              case sjp_wz45:
 362   2                  if(par_model>str_begin.sjwz){
 363   3                      fun_sj1(sjp_wz4);
 364   3                      fun_startdj(mot_dj3,-100);
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 7   

 365   3                      fun_delay(str_cod.sj1zjw,del_ms);
 366   3                  }
 367   2                  else{//Ë¶ÅÂéªÁöÑÂú∞ÊñπÂú®‰∏äÈù¢ÔºåÂêë‰∏äËµ∞
 368   3                      fun_startdj(mot_dj3,100);
 369   3                      fun_delay(str_cod.sj1zjw,del_ms);
 370   3                  }
 371   2                  break;
 372   2              case sjp_wz5://ÂçáÈôç‰ΩçÁΩÆ5
 373   2                  fun_startdj(mot_dj3,-100);
 374   2                  fun_select(sel_912);
 375   2                  fun_delay(50,del_ms);
 376   2                  while(1){//Ë¶ÅÂéªÁöÑÂú∞ÊñπÊØîËæÉÈù†‰∏ã,Âêë‰∏ãËµ∞                
 377   3                      while(in_wz5==1);
 378   3                      fun_delay(20,del_ms);
 379   3                      if(in_wz5==0){
 380   4                          fun_delay(str_cod.sj1bzw,del_ms);
 381   4                          break;
 382   4                      }
 383   3                  }
 384   2                  break;
 385   2              default:
 386   2                  break;
 387   2          }
 388   1          fun_stop(mot_dj3);
 389   1          str_begin.sjwz=par_model;//Â≠òÂÇ®ËøêË°åÁªìÊûú
 390   1      }//ÂçáÈôçÂçïÊ≠•ËøêÂä®
 391          void fun_py1(enum varENU_tra par_model){
 392   1          switch(par_model){
 393   2              case tra_q://ÂâçÂπ≥Áßª(Ê≤°ÊúâÁîµÊú∫ÁöÑÂë¢‰∏™ÊñπÂêë)
 394   2                  while(1){
 395   3                      fun_startdj(mot_dj2,100);
 396   3                      while(in_qpy==1);
 397   3                      fun_delay(20,del_ms);
 398   3                      if(in_qpy==0){
 399   4                          fun_delay(20,del_ms);
 400   4                          break;
 401   4                      }
 402   3                  }
 403   2                  break;
 404   2              case tra_kq:
 405   2                  switch(str_begin.pywz){
 406   3                      case tra_q:
 407   3                          fun_startdj(mot_dj2,-100);
 408   3                          fun_delay(str_cod.py1qkq,del_ms);
 409   3                          break;
 410   3                      case tra_z:
 411   3                          fun_startdj(mot_dj2,100);
 412   3                          fun_delay(str_cod.py1kqz,del_ms);
 413   3                          break;
 414   3                      case tra_kh:
 415   3                          fun_startdj(mot_dj2,100);
 416   3                          fun_delay(str_cod.py1kqkh,del_ms);
 417   3                          break;
 418   3                      case tra_h:
 419   3                          fun_startdj(mot_dj2,100);
 420   3                          fun_delay(str_cod.py1kqh,del_ms);
 421   3                          break;
 422   3                  }
 423   2                  break;
 424   2              case tra_z:
 425   2                  switch(str_begin.pywz){
 426   3                      case tra_q:
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 8   

 427   3                          fun_startdj(mot_dj2,-100);
 428   3                          fun_delay(str_cod.py1qz,del_ms);
 429   3                          break;
 430   3                      case tra_kq:
 431   3                          fun_startdj(mot_dj2,-100);
 432   3                          fun_delay(str_cod.py1kqz,del_ms);
 433   3                          break;
 434   3                      case tra_kh:
 435   3                          fun_startdj(mot_dj2,100);
 436   3                          fun_delay(str_cod.py1zkh,del_ms);
 437   3                          break;
 438   3                      case tra_h:
 439   3                          fun_startdj(mot_dj2,100);
 440   3                          fun_delay(str_cod.py1zh,del_ms);
 441   3                          break;
 442   3                  }
 443   2                  break;
 444   2              case tra_kh:
 445   2                  switch(str_begin.pywz){
 446   3                      case tra_q:
 447   3                          fun_startdj(mot_dj2,-100);
 448   3                          fun_delay(str_cod.py1qkh,del_ms);
 449   3                          break;
 450   3                      case tra_kq:
 451   3                          fun_startdj(mot_dj2,-100);
 452   3                          fun_delay(str_cod.py1kqkh,del_ms);
 453   3                          break;
 454   3                      case tra_z:
 455   3                          fun_startdj(mot_dj2,-100);
 456   3                          fun_delay(str_cod.py1zkh,del_ms);
 457   3                          break;
 458   3                      case tra_h:
 459   3                          fun_startdj(mot_dj2,100);
 460   3                          fun_delay(str_cod.py1khh,del_ms);
 461   3                          break;
 462   3                  }
 463   2                  break;
 464   2              case tra_h://ÂêéÂπ≥Áßª(ÊúâÁîµÊú∫ÁöÑÂë¢‰∏™ÊñπÂêë)
 465   2                  while(1){
 466   3                      fun_startdj(mot_dj2,-100);
 467   3                      while(in_hpy==1);
 468   3                      fun_delay(20,del_ms);
 469   3                      if(in_hpy==0){
 470   4                          fun_delay(20,del_ms);
 471   4                          break;
 472   4                      }
 473   3                  }
 474   2                  break;
 475   2              default:
 476   2                  break;
 477   2          }
 478   1          fun_stop(mot_dj2);
 479   1          str_begin.pywz=par_model;//Â≠òÂÇ®ËøêË°åÁªìÊûú
 480   1      }//Âπ≥ÁßªÂçïÊ≠•ËøêÂä®
 481          void fun_hz1(enum varENU_dir par_model){
 482   1          fun_select(sel_912);
 483   1          switch(par_model){
 484   2              case dir_up://ÂõûËΩ¨Ëá≥ÂâçÊñπ
 485   2                  switch(str_begin.hzfx){
 486   3                      case dir_down://Áé∞Âú®Âú®‰∏ãÊñπ
 487   3                          fun_startdj(mot_dj4,-100);
 488   3                          fun_delay(1,del_s);
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 9   

 489   3                          while(1){
 490   4                              while(in_hz==1);
 491   4                              fun_delay(25,del_ms);
 492   4                              if(in_hz==0)
 493   4                                  break;
 494   4                          }
 495   3                          while(1){
 496   4                              while(in_hz==0);
 497   4                              fun_delay(25,del_ms);
 498   4                              if(in_hz==1)
 499   4                                  break;
 500   4                          }
 501   3                          while(1){
 502   4                              while(in_hz==1);
 503   4                              fun_delay(25,del_ms);
 504   4                              if(in_hz==0)
 505   4                                  break;
 506   4                          }
 507   3                          break;
 508   3                      case dir_left://Áé∞Âú®Âú®Â∑¶Ëæπ
 509   3                          fun_startdj(mot_dj4,100);
 510   3                          fun_delay(1,del_s);
 511   3                          while(1){
 512   4                              while(in_hz==1);
 513   4                              fun_delay(25,del_ms);
 514   4                              if(in_hz==0)
 515   4                                  break;
 516   4                          }
 517   3                          break;
 518   3                      case dir_right://Áé∞Âú®Âú®Âè≥Ëæπ
 519   3                          fun_startdj(mot_dj4,-100);
 520   3                          fun_delay(1,del_s);
 521   3                          while(1){
 522   4                              while(in_hz==1);
 523   4                              fun_delay(25,del_ms);
 524   4                              if(in_hz==0)
 525   4                                  break;
 526   4                          }
 527   3                          break;
 528   3                      default:
 529   3                          break;
 530   3                  }
 531   2                  break;
 532   2              case dir_down://Ë¶ÅÂéª‰∏ãÈù¢
 533   2                  switch(str_begin.hzfx){
 534   3                      case dir_up://Áé∞Âú®Âú®‰∏äÈù¢
 535   3                          fun_startdj(mot_dj4,100);
 536   3                          fun_delay(1,del_s);
 537   3                          while(1){
 538   4                              while(in_hz==1);
 539   4                              fun_delay(25,del_ms);
 540   4                              if(in_hz==0)
 541   4                                  break;
 542   4                          }
 543   3                          while(1){
 544   4                              while(in_hz==0);
 545   4                              fun_delay(25,del_ms);
 546   4                              if(in_hz==1)
 547   4                                  break;
 548   4                          }
 549   3                          while(1){
 550   4                              while(in_hz==1);
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 10  

 551   4                              fun_delay(25,del_ms);
 552   4                              if(in_hz==0)
 553   4                                  break;
 554   4                          }
 555   3                          break;
 556   3                      case dir_left://Áé∞Âú®Âú®Â∑¶Èù¢
 557   3                          fun_startdj(mot_dj4,-100);
 558   3                          fun_delay(1,del_s);
 559   3                          while(1){
 560   4                              while(in_hz==1);
 561   4                              fun_delay(25,del_ms);
 562   4                              if(in_hz==0)
 563   4                                  break;
 564   4                          }
 565   3                          break;
 566   3                      case dir_right://Áé∞Âú®Âú®Âè≥Èù¢
 567   3                          fun_startdj(mot_dj4,100);
 568   3                          fun_delay(1,del_s);
 569   3                          while(1){
 570   4                              while(in_hz==1);
 571   4                              fun_delay(25,del_ms);
 572   4                              if(in_hz==0)
 573   4                                  break;
 574   4                          }
 575   3                          break;
 576   3                      default:
 577   3                          break;
 578   3                  }
 579   2                  break;
 580   2              case dir_left://Ë¶ÅÂéªÂ∑¶Ëæπ
 581   2                  switch(str_begin.hzfx){
 582   3                      case dir_up://Áé∞Âú®Âú®‰∏äÈù¢
 583   3                          fun_startdj(mot_dj4,-100);
 584   3                          fun_delay(1,del_s);
 585   3                          while(1){
 586   4                              while(in_hz==1);
 587   4                              fun_delay(25,del_ms);
 588   4                              if(in_hz==0)
 589   4                                  break;
 590   4                          }
 591   3                          break;
 592   3                      case dir_down://Áé∞Âú®Âú®‰∏ãÈù¢
 593   3                          fun_startdj(mot_dj4,100);
 594   3                          fun_delay(1,del_s);
 595   3                          while(1){
 596   4                              while(in_hz==1);
 597   4                              fun_delay(25,del_ms);
 598   4                              if(in_hz==0)
 599   4                                  break;
 600   4                          }
 601   3                          break;
 602   3                      case dir_right://Áé∞Âú®Âú®Âè≥Èù¢
 603   3                          fun_startdj(mot_dj4,-100);
 604   3                          fun_delay(1,del_s);
 605   3                          while(1){
 606   4                              while(in_hz==1);
 607   4                              fun_delay(25,del_ms);
 608   4                              if(in_hz==0)
 609   4                                  break;
 610   4                          }
 611   3                          while(1){
 612   4                              while(in_hz==0);
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 11  

 613   4                              fun_delay(25,del_ms);
 614   4                              if(in_hz==1)
 615   4                                  break;
 616   4                          }
 617   3                          while(1){
 618   4                              while(in_hz==1);
 619   4                              fun_delay(25,del_ms);
 620   4                              if(in_hz==0){
 621   5                                  break;
 622   5                              }
 623   4                          }
 624   3                          break;
 625   3                      default:
 626   3                          break;
 627   3                  }
 628   2                  break;
 629   2              case dir_right://Ë¶ÅÂéªÂè≥Èù¢
 630   2                  switch(str_begin.hzfx){
 631   3                      case dir_up://Áé∞Âú®Âú®ÂâçÈù¢
 632   3                          fun_startdj(mot_dj4,100);
 633   3                          fun_delay(1,del_s);
 634   3                          while(1){
 635   4                              while(in_hz==1);
 636   4                              fun_delay(25,del_ms);
 637   4                              if(in_hz==0)
 638   4                                  break;
 639   4                          }
 640   3                          break;
 641   3                      case dir_down://Áé∞Âú®Âú®‰∏ãÈù¢
 642   3                          fun_startdj(mot_dj4,-100);
 643   3                          fun_delay(1,del_s);
 644   3                          while(1){
 645   4                              while(in_hz==1);
 646   4                              fun_delay(25,del_ms);
 647   4                              if(in_hz==0)
 648   4                                  break;
 649   4                          }
 650   3                          break;
 651   3                      case dir_left://Áé∞Âú®Âú®Â∑¶Èù¢
 652   3                          fun_startdj(mot_dj4,100);
 653   3                          fun_delay(1,del_s);
 654   3                          while(1){
 655   4                              while(in_hz==1);
 656   4                              fun_delay(25,del_ms);
 657   4                              if(in_hz==0)
 658   4                                  break;
 659   4                          }
 660   3                          while(1){
 661   4                              while(in_hz==0);
 662   4                              fun_delay(25,del_ms);
 663   4                              if(in_hz==1)
 664   4                                  break;
 665   4                          }
 666   3                          while(1){
 667   4                              while(in_hz==1);
 668   4                              fun_delay(25,del_ms);
 669   4                              if(in_hz==0){
 670   5                                  break;
 671   5                              }
 672   4                          }
 673   3                          break;
 674   3                      default:
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 12  

 675   3                          break;
 676   3                  }
 677   2                  break;
 678   2              default:
 679   2                  break;
 680   2          }
 681   1          fun_stop(mot_dj4);
 682   1          str_begin.hzfx=par_model;//Â≠òÂÇ®ËøêË°åÁªìÊûú
 683   1      }//ÂõûËΩ¨ÂçïÊ≠•ËøêÂä®
 684          void fun_pyhz2(enum varENU_tra par_py,enum varENU_dir par_hz){
 685   1          if(str_begin.hzfx!=par_hz){
 686   2              fun_py1(tra_z);
 687   2              switch(par_hz){//ÂêØÂä®ÂõûËΩ¨,Âú®‰ΩçÂàô‰∏çÂêØÂä®
 688   3                  case dir_up://ÂõûËΩ¨Ëá≥ÂâçÊñπ
 689   3                      switch(str_begin.hzfx){
 690   4                          case dir_down://Áé∞Âú®Âú®‰∏ãÊñπ
 691   4                              fun_startdj(mot_dj4,-100);
 692   4                              break;
 693   4                          case dir_left://Áé∞Âú®Âú®Â∑¶Ëæπ
 694   4                              fun_startdj(mot_dj4,100);
 695   4                              break;
 696   4                          case dir_right://Áé∞Âú®Âú®Âè≥Ëæπ
 697   4                              fun_startdj(mot_dj4,-100);
 698   4                              break;
 699   4                          default:
 700   4                              break;
 701   4                      }
 702   3                      break;
 703   3                  case dir_down://Ë¶ÅÂéª‰∏ãÈù¢
 704   3                      switch(str_begin.hzfx){
 705   4                          case dir_up://Áé∞Âú®Âú®‰∏äÈù¢
 706   4                              fun_startdj(mot_dj4,100);
 707   4                              break;
 708   4                          case dir_left://Áé∞Âú®Âú®Â∑¶Èù¢
 709   4                              fun_startdj(mot_dj4,-100);
 710   4                              break;
 711   4                          case dir_right://Áé∞Âú®Âú®Âè≥Èù¢
 712   4                              fun_startdj(mot_dj4,100);
 713   4                              break;
 714   4                          default:
 715   4                              break;
 716   4                      }
 717   3                      break;
 718   3                  case dir_left://Ë¶ÅÂéªÂ∑¶Ëæπ
 719   3                      switch(str_begin.hzfx){
 720   4                          case dir_up://Áé∞Âú®Âú®‰∏äÈù¢
 721   4                              fun_startdj(mot_dj4,-100);
 722   4                              break;
 723   4                          case dir_down://Áé∞Âú®Âú®‰∏ãÈù¢
 724   4                              fun_startdj(mot_dj4,100);
 725   4                              break;
 726   4                          case dir_right://Áé∞Âú®Âú®Âè≥Èù¢
 727   4                              fun_startdj(mot_dj4,-100);
 728   4                              break;
 729   4                          default:
 730   4                              break;
 731   4                      }
 732   3                      break;
 733   3                  case dir_right://Ë¶ÅÂéªÂè≥Èù¢
 734   3                      switch(str_begin.hzfx){
 735   4                          case dir_up://Áé∞Âú®Âú®ÂâçÈù¢
 736   4                              fun_startdj(mot_dj4,100);
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 13  

 737   4                              break;
 738   4                          case dir_down://Áé∞Âú®Âú®‰∏ãÈù¢
 739   4                              fun_startdj(mot_dj4,-100);
 740   4                              break;
 741   4                          case dir_left://Áé∞Âú®Âú®Â∑¶Èù¢
 742   4                              fun_startdj(mot_dj4,100);
 743   4                              break;
 744   4                          default:
 745   4                              break;
 746   4                      }
 747   3                      break;
 748   3                  default:
 749   3                      break;
 750   3              }
 751   2          }
 752   1          switch(par_py){
 753   2              case tra_q://ÂâçÂπ≥Áßª(Ê≤°ÊúâÁîµÊú∫ÁöÑÂë¢‰∏™ÊñπÂêë)
 754   2                  while(1){
 755   3                      fun_startdj(mot_dj2,100);
 756   3                      while(in_qpy==1);
 757   3                      fun_delay(20,del_ms);
 758   3                      if(in_qpy==0){
 759   4                          fun_delay(20,del_ms);
 760   4                          break;
 761   4                      }
 762   3                  }
 763   2                  break;
 764   2              case tra_kq:
 765   2                  fun_startdj(mot_dj2,100);
 766   2                  fun_delay(str_cod.py1kqz,del_ms);
 767   2                  break;
 768   2              case tra_kh:
 769   2                  fun_startdj(mot_dj2,-100);
 770   2                  fun_delay(str_cod.py1zkh,del_ms);
 771   2                  break;
 772   2              case tra_h://ÂêéÂπ≥Áßª(ÊúâÁîµÊú∫ÁöÑÂë¢‰∏™ÊñπÂêë)
 773   2                  while(1){
 774   3                      fun_startdj(mot_dj2,-100);
 775   3                      while(in_hpy==1);
 776   3                      fun_delay(20,del_ms);
 777   3                      if(in_hpy==0){
 778   4                          fun_delay(20,del_ms);
 779   4                          break;
 780   4                      }
 781   3                  }
 782   2                  break;
 783   2              default:
 784   2                  break;
 785   2          }
 786   1          fun_stop(mot_dj2);
 787   1          str_begin.pywz=par_py;//Â≠òÂÇ®Âπ≥Áßª‰ΩçÁΩÆ
 788   1          if(str_begin.hzfx!=par_hz){
 789   2              fun_select(sel_912);
 790   2              switch(par_hz){
 791   3                  case dir_up://ÂõûËΩ¨Ëá≥ÂâçÊñπ
 792   3                      switch(str_begin.hzfx){
 793   4                          case dir_down://Áé∞Âú®Âú®‰∏ãÊñπ
 794   4                              while(1){
 795   5                                  while(in_hz==1);
 796   5                                  fun_delay(25,del_ms);
 797   5                                  if(in_hz==0)
 798   5                                      break;
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 14  

 799   5                              }
 800   4                              while(1){
 801   5                                  while(in_hz==0);
 802   5                                  fun_delay(1,del_s);
 803   5                                  if(in_hz==1)
 804   5                                      break;
 805   5                              }
 806   4                              while(1){
 807   5                                  while(in_hz==1);
 808   5                                  fun_delay(25,del_ms);
 809   5                                  if(in_hz==0)
 810   5                                      break;
 811   5                              }
 812   4                              break;
 813   4                          case dir_left://Áé∞Âú®Âú®Â∑¶Ëæπ
 814   4                              while(1){
 815   5                                  while(in_hz==1);
 816   5                                  fun_delay(25,del_ms);
 817   5                                  if(in_hz==0)
 818   5                                      break;
 819   5                              }
 820   4                              break;
 821   4                          case dir_right://Áé∞Âú®Âú®Âè≥Ëæπ
 822   4                              while(1){
 823   5                                  while(in_hz==1);
 824   5                                  fun_delay(25,del_ms);
 825   5                                  if(in_hz==0)
 826   5                                      break;
 827   5                              }
 828   4                              break;
 829   4                          default:
 830   4                              break;
 831   4                      }
 832   3                      break;
 833   3                  case dir_down://Ë¶ÅÂéª‰∏ãÈù¢
 834   3                      switch(str_begin.hzfx){
 835   4                          case dir_up://Áé∞Âú®Âú®‰∏äÈù¢
 836   4                              while(1){
 837   5                                  while(in_hz==1);
 838   5                                  fun_delay(25,del_ms);
 839   5                                  if(in_hz==0)
 840   5                                      break;
 841   5                              }
 842   4                              while(1){
 843   5                                  while(in_hz==0);
 844   5                                  fun_delay(1,del_s);
 845   5                                  if(in_hz==1)
 846   5                                      break;
 847   5                              }
 848   4                              while(1){
 849   5                                  while(in_hz==1);
 850   5                                  fun_delay(25,del_ms);
 851   5                                  if(in_hz==0)
 852   5                                      break;
 853   5                              }
 854   4                              break;
 855   4                          case dir_left://Áé∞Âú®Âú®Â∑¶Èù¢
 856   4                              while(1){
 857   5                                  while(in_hz==1);
 858   5                                  fun_delay(25,del_ms);
 859   5                                  if(in_hz==0)
 860   5                                      break;
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 15  

 861   5                              }
 862   4                              break;
 863   4                          case dir_right://Áé∞Âú®Âú®Âè≥Èù¢
 864   4                              while(1){
 865   5                                  while(in_hz==1);
 866   5                                  fun_delay(25,del_ms);
 867   5                                  if(in_hz==0)
 868   5                                      break;
 869   5                              }
 870   4                              break;
 871   4                          default:
 872   4                              break;
 873   4                      }
 874   3                      break;
 875   3                  case dir_left://Ë¶ÅÂéªÂ∑¶Ëæπ
 876   3                      switch(str_begin.hzfx){
 877   4                          case dir_up://Áé∞Âú®Âú®‰∏äÈù¢
 878   4                              while(1){
 879   5                                  while(in_hz==1);
 880   5                                  fun_delay(25,del_ms);
 881   5                                  if(in_hz==0)
 882   5                                      break;
 883   5                              }
 884   4                              break;
 885   4                          case dir_down://Áé∞Âú®Âú®‰∏ãÈù¢
 886   4                              while(1){
 887   5                                  while(in_hz==1);
 888   5                                  fun_delay(25,del_ms);
 889   5                                  if(in_hz==0)
 890   5                                      break;
 891   5                              }
 892   4                              break;
 893   4                          case dir_right://Áé∞Âú®Âú®Âè≥Èù¢
 894   4                              while(1){
 895   5                                  while(in_hz==1);
 896   5                                  fun_delay(25,del_ms);
 897   5                                  if(in_hz==0)
 898   5                                      break;
 899   5                              }
 900   4                              while(1){
 901   5                                  while(in_hz==0);
 902   5                                  fun_delay(1,del_s);
 903   5                                  if(in_hz==1)
 904   5                                      break;
 905   5                              }
 906   4                              while(1){
 907   5                                  while(in_hz==1);
 908   5                                  fun_delay(25,del_ms);
 909   5                                  if(in_hz==0){
 910   6                                      break;
 911   6                                  }
 912   5                              }
 913   4                              break;
 914   4                          default:
 915   4                              break;
 916   4                      }
 917   3                      break;
 918   3                  case dir_right://Ë¶ÅÂéªÂè≥Èù¢
 919   3                      switch(str_begin.hzfx){
 920   4                          case dir_up://Áé∞Âú®Âú®ÂâçÈù¢
 921   4                              while(1){
 922   5                                  while(in_hz==1);
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 16  

 923   5                                  fun_delay(25,del_ms);
 924   5                                  if(in_hz==0)
 925   5                                      break;
 926   5                              }
 927   4                              break;
 928   4                          case dir_down://Áé∞Âú®Âú®‰∏ãÈù¢
 929   4                              while(1){
 930   5                                  while(in_hz==1);
 931   5                                  fun_delay(25,del_ms);
 932   5                                  if(in_hz==0)
 933   5                                      break;
 934   5                              }
 935   4                              break;
 936   4                          case dir_left://Áé∞Âú®Âú®Â∑¶Èù¢
 937   4                              while(1){
 938   5                                  while(in_hz==1);
 939   5                                  fun_delay(25,del_ms);
 940   5                                  if(in_hz==0)
 941   5                                      break;
 942   5                              }
 943   4                              while(1){
 944   5                                  while(in_hz==0);
 945   5                                  fun_delay(1,del_s);
 946   5                                  if(in_hz==1)
 947   5                                      break;
 948   5                              }
 949   4                              while(1){
 950   5                                  while(in_hz==1);
 951   5                                  fun_delay(25,del_ms);
 952   5                                  if(in_hz==0){
 953   6                                      break;
 954   6                                  }
 955   5                              }
 956   4                              break;
 957   4                          default:
 958   4                              break;
 959   4                      }
 960   3                      break;
 961   3                  default:
 962   3                      break;
 963   3              }
 964   2              fun_stop(mot_dj4);
 965   2              str_begin.hzfx=par_hz;//Â≠òÂÇ®ÂõûËΩ¨‰ΩçÁΩÆ
 966   2          }
 967   1      }//ÂõûËΩ¨ÂçïÊ≠•ËøêÂä®
 968          void fun_mptline(uc par_num,uc par_sd,enum varENU_dir par_model){
 969   1          bit loc_flag=0;
 970   1          xdata ui loc_xh=str_cod.mlinerqd/(0.5*(par_sd*par_sd+par_sd));
 971   1          xdata uc loc_con;
 972   1          xdata uc loc_l=par_sd,loc_r=par_sd;
 973   1          for(loc_con=1;loc_con<par_sd;fun_startdj(mot_rl,loc_con++))//Á°ÆÂÆöË∑ØÁ®ãÁöÑËΩØÂêØÂä®Á®ãÂ∫è
 974   1              fun_delay(loc_xh,del_ms);
 975   1          loc_con=0;
 976   1          while(1){
 977   2              if(((in_ls1)&&(in_ls7))||((in_ls2)&&(in_ls8)))
 978   2                  loc_flag=1;
 979   2              else if(loc_flag==1){
 980   3                  loc_con++;
 981   3                  if(loc_con>=par_num){
 982   4                      for(loc_con=1;loc_con<par_sd;fun_startdj(mot_rl,loc_con++))//Á°ÆÂÆöË∑ØÁ®ãÁöÑËΩØÂêØÂä®Á®ãÂ∫
             -è
 983   4                          fun_delay(loc_xh,del_ms);
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 17  

 984   4                  }
 985   3      
 986   3              }
 987   2      
 988   2      
 989   2      
 990   2              if(in_ls3){//Á∫†ÂÅè
 991   3                  loc_l*=0.9;
 992   3                  loc_r*=1.1;
 993   3              }
 994   2              if(in_ls6){
 995   3                  loc_l*=1.1;
 996   3                  loc_r*=0.9;
 997   3              }  
 998   2              if(in_ls2){
 999   3                  loc_l*=0.8;
1000   3                  loc_r*=1.2;
1001   3              }
1002   2              if(in_ls7){
1003   3                  loc_l*=1.2;
1004   3                  loc_r*=0.8;
1005   3              }
1006   2              if(in_ls1){
1007   3                  loc_l*=0.7;
1008   3                  loc_r*=1.3;
1009   3              }
1010   2              if(in_ls8){
1011   3                  loc_l*=1.3;
1012   3                  loc_r*=0.7;
1013   3              }
1014   2              fun_startdj(mot_l,loc_l);//Êõ¥Êñ∞ÁîµÊú∫ÂèÇÊï∞
1015   2              fun_startdj(mot_r,loc_r);
1016   2          }
1017   1      
1018   1      
1019   1      
1020   1      
1021   1          while(1){
1022   2              loc_l=par_sd;//ÊÅ¢Â§çÈªòËÆ§ÂèÇÊï∞
1023   2              loc_r=par_sd;
1024   2              if((in_ls1&&in_ls7)||(in_ls2&&in_ls8)){//Â∑°Á∫øËÆ°Êï∞
1025   3                  loc_flag=1;
1026   3                  if(loc_con>=par_num){
1027   4                      if(par_model==dir_left){//Â∑¶ËΩ¨
1028   5                          fun_startdj(mot_l,-20);
1029   5                          fun_delay(500,del_ms);
1030   5                          while(1){
1031   6                              while(!in_ls4||!in_ls5);
1032   6                              fun_delay(100,del_us);
1033   6                              if(in_ls4&&in_ls5){
1034   7                                  fun_stop(mot_rl);
1035   7                                  return;
1036   7                              }
1037   6                          }
1038   5                      }
1039   4                      else if(par_model==dir_right){
1040   5                          fun_startdj(mot_r,-20);
1041   5                          fun_delay(500,del_ms);
1042   5                          while(1){
1043   6                              while(!in_ls4||!in_ls5);
1044   6                              fun_delay(100,del_us);
1045   6                              if(in_ls4&&in_ls5){
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 18  

1046   7                                  fun_stop(mot_rl);
1047   7                                  return;
1048   7                              }
1049   6                          }
1050   5                      }
1051   4                  }
1052   3              }
1053   2              else if(loc_flag==1){
1054   3                  if(++loc_con>=par_num){
1055   4                      if(par_model==dir_up){
1056   5                          for(loc_xh=0;loc_xh<str_cod.mlineqc;loc_xh++){
1057   6                              loc_l=par_sd*0.7;//ÊÅ¢Â§çÈªòËÆ§ÂèÇÊï∞
1058   6                              loc_r=par_sd*0.7;
1059   6                              if(in_ls3){//Á∫†ÂÅè
1060   7                                  loc_l*=0.9;
1061   7                                  loc_r*=1.1;
1062   7                              }
1063   6                              if(in_ls6){
1064   7                                  loc_l*=1.1;
1065   7                                  loc_r*=0.9;
1066   7                              }
1067   6                              if(in_ls2){
1068   7                                  loc_l*=0.8;
1069   7                                  loc_r*=1.2;
1070   7                              }
1071   6                              if(in_ls7){
1072   7                                  loc_l*=1.2;
1073   7                                  loc_r*=0.8;
1074   7                              }
1075   6                              if(in_ls1){
1076   7                                  loc_l*=0.7;
1077   7                                  loc_r*=1.3;
1078   7                              }
1079   6                              if(in_ls8){
1080   7                                  loc_l*=1.3;
1081   7                                  loc_r*=0.7;
1082   7                              }
1083   6                              fun_startdj(mot_l,loc_l);//Êõ¥Êñ∞ÁîµÊú∫ÂèÇÊï∞
1084   6                              fun_startdj(mot_r,loc_r);
1085   6                              fun_delay(1,del_ms);
1086   6                          }
1087   5                          fun_stop(mot_rl);
1088   5                          return;
1089   5                      }
1090   4                  }
1091   3                  loc_flag=0;
1092   3              }
1093   2              if(in_ls3){//Á∫†ÂÅè
1094   3                  loc_l*=0.9;
1095   3                  loc_r*=1.1;
1096   3              }
1097   2              if(in_ls6){
1098   3                  loc_l*=1.1;
1099   3                  loc_r*=0.9;
1100   3              }  
1101   2              if(in_ls2){
1102   3                  loc_l*=0.8;
1103   3                  loc_r*=1.2;
1104   3              }
1105   2              if(in_ls7){
1106   3                  loc_l*=1.2;
1107   3                  loc_r*=0.8;
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 19  

1108   3              }
1109   2              if(in_ls1){
1110   3                  loc_l*=0.7;
1111   3                  loc_r*=1.3;
1112   3              }
1113   2              if(in_ls8){
1114   3                  loc_l*=1.3;
1115   3                  loc_r*=0.7;
1116   3              }
1117   2              fun_startdj(mot_l,loc_l);//Êõ¥Êñ∞ÁîµÊú∫ÂèÇÊï∞
1118   2              fun_startdj(mot_r,loc_r);
1119   2          }
1120   1      }//‰∏ªÂáΩÊï∞ÊôÆÈÄöÂ∑°Á∫ø
1121          void fun_stope2prom(){
1122   1          IAP_CONTR = 0;                  //ÂÖ≥Èó≠IAPÂäüËÉΩ
1123   1          IAP_CMD = 0;                    //Ê∏ÖÈô§ÂëΩ‰ª§
1124   1          IAP_TRIG = 0;                   //Ê∏ÖÈô§Ëß¶ÂèëÂØÑÂ≠òÂô®
1125   1          IAP_ADDRH = 0x80;               //Êï∞ÊçÆÊåáÈíàÊåáÂêëÈùûEEPROMÂå∫
1126   1          IAP_ADDRL = 0;                  //Ê∏ÖÈô§IAPÂú∞ÂùÄ
1127   1      }//ÂÖ≥Èó≠EEPROMÂäüËÉΩ(IapIdle)
1128          uc fun_reade2prom(ui par_add){
1129   1          uc loc_dat;                     //Êï∞ÊçÆÁºìÂÜ≤Âå∫
1130   1          IAP_CONTR = 0x83;               //ÊâìÂºÄEEPROMÂäüËÉΩ,ËÆæÁΩÆÁ≠âÂæÖÊó∂Èó¥
1131   1          IAP_CMD = 1;                    //ËÆæÁΩÆEEPROMËØªÂëΩ‰ª§
1132   1          IAP_ADDRL = par_add;            //ËÆæÁΩÆEEPROMÂú∞ÂùÄ‰ΩéÂÖ´‰Ωç
1133   1          IAP_ADDRH = par_add >> 8;       //ËÆæÁΩÆEEPROMÂú∞ÂùÄÈ´òÂÖ´‰Ωç
1134   1          IAP_TRIG = 0x5a;                //Ëß¶Âèë
1135   1          IAP_TRIG = 0xa5;                //ÂÜçÊ¨°Ëß¶Âèë
1136   1          fun_delay(10,del_us);           //Á®çÁ≠â‰∏Ä‰ºöÂÑø
1137   1          loc_dat = IAP_DATA;             //ËØªÂá∫EEPROM‰∏≠ÁöÑÊï∞ÊçÆ
1138   1          fun_stope2prom();               //ÂÖ≥Èó≠EEPROMÂäüËÉΩ
1139   1          return loc_dat;                 //ËøîÂõûËØªÂèñÁªìÊûú
1140   1      }//ËØªÂèñEEPROMÊï∞ÊçÆ
1141          void fun_writee2prom(ui par_add,uc par_dat){
1142   1          IAP_CONTR = 0x83;               //ÊâìÂºÄEEPROMÂäüËÉΩ,ËÆæÁΩÆÁ≠âÂæÖÊó∂Èó¥
1143   1          IAP_CMD = 2;                    //ËÆæÁΩÆEEPROMÂÜôÂÖ•ÂëΩ‰ª§
1144   1          IAP_ADDRL = par_add;            //ËÆæÁΩÆEEPROMÂú∞ÂùÄ‰ΩéÂÖ´‰Ωç
1145   1          IAP_ADDRH = par_add >> 8;       //ËÆæÁΩÆEEPROMÂú∞ÂùÄÈ´òÂÖ´‰Ωç
1146   1          IAP_DATA = par_dat;             //ÂÜôÂÖ•Êï∞ÊçÆ
1147   1          IAP_TRIG = 0x5a;                //Ëß¶Âèë
1148   1          IAP_TRIG = 0xa5;                //ÂÜçÊ¨°Ëß¶Âèë
1149   1          fun_delay(10,del_us);           //Á®çÁ≠â‰∏Ä‰ºöÂÑø
1150   1          fun_stope2prom();               //ÂÖ≥Èó≠EEPROMÂäüËÉΩ
1151   1      }//ÂÜôEEPROMÊï∞ÊçÆ
1152          void fun_cleane2prom(ui par_add){
1153   1          IAP_CONTR = 0x83;               //ÊâìÂºÄEEPROMÂäüËÉΩ,ËÆæÁΩÆÁ≠âÂæÖÊó∂Èó¥
1154   1          IAP_CMD = 3;                    //ËÆæÁΩÆEEPROMÊì¶Èô§ÂëΩ‰ª§
1155   1          IAP_ADDRL = par_add;            //ËÆæÁΩÆEEPROMÂú∞ÂùÄ‰ΩéÂÖ´‰Ωç
1156   1          IAP_ADDRH = par_add >> 8;       //ËÆæÁΩÆEEPROMÂú∞ÂùÄÈ´òÂÖ´‰Ωç
1157   1          IAP_TRIG = 0x5a;                //Ëß¶Âèë
1158   1          IAP_TRIG = 0xa5;                //ÂÜçÊ¨°Ëß¶Âèë
1159   1          fun_delay(10,del_us);           //Á®çÁ≠â‰∏Ä‰ºöÂÑø
1160   1          fun_stope2prom();               //ÂÖ≥Èó≠EEPROMÂäüËÉΩ
1161   1      }//Ê∏ÖÈô§EEPROMÊï∞ÊçÆ
1162          void fun_calibration(){
1163   1          // fun_sj1(sjp_wz1);//ÂçáÂà∞ÊúÄ‰∏ä‰Ωç
1164   1          fun_py1(tra_q);//ÁßªÂä®Âà∞ÊúÄÂâçÁ´Ø
1165   1          fun_py1(tra_h);//ÁßªÂä®Âà∞ÊúÄÂêéÁ´Ø
1166   1          def_timer0start//ÂºÄÂßãÂÆöÊó∂Âô®
1167   1          fun_py1(tra_q);//ÁßªÂä®Âà∞ÂâçÁ´ØÂπ∂ËÆ°Êó∂
1168   1          fun_py1(tra_h);//ÁßªÂä®Âà∞ÂêéÁ´Ø
1169   1          def_timer0stop//ÂÅúÊ≠¢ÂÆöÊó∂Âô®
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 20  

1170   1          var_timer0*=0.39;
1171   1          str_cod.py1zh=str_cod.py1qz=var_timer0*0.5;
1172   1          str_cod.py1qkh=str_cod.py1kqh=var_timer0*0.75;
1173   1          str_cod.py1qkq=str_cod.py1khh=var_timer0*0.25;
1174   1          str_cod.py1kqz=str_cod.py1zkh=var_timer0*0.25;
1175   1          str_cod.py1kqkh=var_timer0*0.5;
1176   1          var_timer0=0;
1177   1          OUT(var_timer0)
1178   1      }//Ëá™Âä®Ê†°ÂáÜÂèÇÊï∞
1179          void fun_port(){
1180   1          PCON|=0x80;       //‰ΩøËÉΩÊ≥¢ÁâπÁéáÂÄçÈÄü‰ΩçSMOD
1181   1          SCON=0x50;        //8‰ΩçÊï∞ÊçÆ,ÂèØÂèòÊ≥¢ÁâπÁéá
1182   1          AUXR|=0x04;       //Áã¨Á´ãÊ≥¢ÁâπÁéáÂèëÁîüÂô®Êó∂Èíü‰∏∫Fosc,Âç≥1T
1183   1          BRT=0xD9;     //ËÆæÂÆöÁã¨Á´ãÊ≥¢ÁâπÁéáÂèëÁîüÂô®ÈáçË£ÖÂÄº
1184   1          AUXR|=0x01;       //‰∏≤Âè£1ÈÄâÊã©Áã¨Á´ãÊ≥¢ÁâπÁéáÂèëÁîüÂô®‰∏∫Ê≥¢ÁâπÁéáÂèëÁîüÂô®
1185   1          AUXR|=0x10;       //ÂêØÂä®Áã¨Á´ãÊ≥¢ÁâπÁéáÂèëÁîüÂô®
1186   1          TI=1;//ÊâìÂºÄ‰∏≤Âè£‰º†ËæìÂäüËÉΩ
1187   1      }//‰∏≤Âè£ÂàùÂßãÂåñ
1188          void fun_zhuajian(
1189              uc par_01,uc par_02,uc par_03,uc par_04,uc par_41,uc par_42,uc par_43,uc par_44,
1190              uc par_31,uc par_32,uc par_33,uc par_34,uc par_71,uc par_72,uc par_73,uc par_74){
1191   1      
1192   1          xdata uc loc_data[8][5][2];//‰∏âÁª¥Êï∞ÁªÑ,8‰∏™Âå∫,5‰∏™È´òÂ∫¶
1193   1          xdata uc loc_high[8];
1194   1          xdata uc loc_high03;
1195   1          xdata uc loc_high47;
1196   1          xdata uc loc_high07;
1197   1          xdata uc loc_xh1,loc_xh2;
1198   1      
1199   1          memset(loc_data,0,sizeof(loc_data));//Ê∏ÖÁ©∫Êï∞ÁªÑ
1200   1          //Ëµ∑ÂßãÂå∫‰ª∂Âè∑
1201   1          loc_data[0][1][0]=par_01;//‰º†ÂÖ•ÂΩ¢ÂèÇ:Âå∫0ÁöÑÁ¨¨1Âè∑‰ª∂‰ª∂Âè∑(ÊúÄÈ´ò‰Ωç)
1202   1          loc_data[0][2][0]=par_02;//‰º†ÂÖ•ÂΩ¢ÂèÇ:Âå∫0ÁöÑÁ¨¨2Âè∑‰ª∂‰ª∂Âè∑
1203   1          loc_data[0][3][0]=par_03;//‰º†ÂÖ•ÂΩ¢ÂèÇ:Âå∫0ÁöÑÁ¨¨3Âè∑‰ª∂‰ª∂Âè∑
1204   1          loc_data[0][4][0]=par_04;//‰º†ÂÖ•ÂΩ¢ÂèÇ:Âå∫0ÁöÑÁ¨¨4Âè∑‰ª∂‰ª∂Âè∑(ÊúÄ‰Ωé‰Ωç)
1205   1          loc_data[4][1][0]=par_41;//‰º†ÂÖ•ÂΩ¢ÂèÇ:Âå∫4ÁöÑÁ¨¨1Âè∑‰ª∂‰ª∂Âè∑(ÊúÄÈ´ò‰Ωç)
1206   1          loc_data[4][2][0]=par_42;//‰º†ÂÖ•ÂΩ¢ÂèÇ:Âå∫4ÁöÑÁ¨¨2Âè∑‰ª∂‰ª∂Âè∑
1207   1          loc_data[4][3][0]=par_43;//‰º†ÂÖ•ÂΩ¢ÂèÇ:Âå∫4ÁöÑÁ¨¨3Âè∑‰ª∂‰ª∂Âè∑
1208   1          loc_data[4][4][0]=par_44;//‰º†ÂÖ•ÂΩ¢ÂèÇ:Âå∫4ÁöÑÁ¨¨4Âè∑‰ª∂‰ª∂Âè∑(ÊúÄ‰Ωé‰Ωç)
1209   1          //ÁõÆÁöÑÂå∫‰ª∂Âè∑
1210   1          loc_data[3][1][0]=par_31;//‰º†ÂÖ•ÂΩ¢ÂèÇ:Âå∫0ÁöÑÁ¨¨1Âè∑‰ª∂‰ª∂Âè∑(ÊúÄÈ´ò‰Ωç)
1211   1          loc_data[3][2][0]=par_32;//‰º†ÂÖ•ÂΩ¢ÂèÇ:Âå∫0ÁöÑÁ¨¨2Âè∑‰ª∂‰ª∂Âè∑
1212   1          loc_data[3][3][0]=par_33;//‰º†ÂÖ•ÂΩ¢ÂèÇ:Âå∫0ÁöÑÁ¨¨3Âè∑‰ª∂‰ª∂Âè∑
1213   1          loc_data[3][4][0]=par_34;//‰º†ÂÖ•ÂΩ¢ÂèÇ:Âå∫0ÁöÑÁ¨¨4Âè∑‰ª∂‰ª∂Âè∑(ÊúÄ‰Ωé‰Ωç)
1214   1          loc_data[7][1][0]=par_71;//‰º†ÂÖ•ÂΩ¢ÂèÇ:Âå∫4ÁöÑÁ¨¨1Âè∑‰ª∂‰ª∂Âè∑(ÊúÄÈ´ò‰Ωç)
1215   1          loc_data[7][2][0]=par_72;//‰º†ÂÖ•ÂΩ¢ÂèÇ:Âå∫4ÁöÑÁ¨¨2Âè∑‰ª∂‰ª∂Âè∑
1216   1          loc_data[7][3][0]=par_73;//‰º†ÂÖ•ÂΩ¢ÂèÇ:Âå∫4ÁöÑÁ¨¨3Âè∑‰ª∂‰ª∂Âè∑
1217   1          loc_data[7][4][0]=par_74;//‰º†ÂÖ•ÂΩ¢ÂèÇ:Âå∫4ÁöÑÁ¨¨4Âè∑‰ª∂‰ª∂Âè∑(ÊúÄ‰Ωé‰Ωç)
1218   1          //ÁõÆÁöÑÊ¨°Â∫è
1219   1          loc_data[3][1][1]=1;//Ê†áÂáÜÊ¨°Â∫è:Âå∫3ÁöÑÁ¨¨1Âè∑ÁõÆÁöÑÊ¨°Â∫èÂè∑(ÊúÄÈ´ò‰Ωç)
1220   1          loc_data[3][2][1]=2;//Ê†áÂáÜÊ¨°Â∫è:Âå∫3ÁöÑÁ¨¨2Âè∑ÁõÆÁöÑÊ¨°Â∫èÂè∑
1221   1          loc_data[3][3][1]=3;//Ê†áÂáÜÊ¨°Â∫è:Âå∫3ÁöÑÁ¨¨3Âè∑ÁõÆÁöÑÊ¨°Â∫èÂè∑
1222   1          loc_data[3][4][1]=4;//Ê†áÂáÜÊ¨°Â∫è:Âå∫3ÁöÑÁ¨¨4Âè∑ÁõÆÁöÑÊ¨°Â∫èÂè∑(ÊúÄ‰Ωé‰Ωç)
1223   1          loc_data[7][1][1]=5;//Ê†áÂáÜÊ¨°Â∫è:Âå∫7ÁöÑÁ¨¨1Âè∑ÁõÆÁöÑÊ¨°Â∫èÂè∑(ÊúÄÈ´ò‰Ωç)
1224   1          loc_data[7][2][1]=6;//Ê†áÂáÜÊ¨°Â∫è:Âå∫7ÁöÑÁ¨¨2Âè∑ÁõÆÁöÑÊ¨°Â∫èÂè∑
1225   1          loc_data[7][3][1]=7;//Ê†áÂáÜÊ¨°Â∫è:Âå∫7ÁöÑÁ¨¨3Âè∑ÁõÆÁöÑÊ¨°Â∫èÂè∑
1226   1          loc_data[7][4][1]=8;//Ê†áÂáÜÊ¨°Â∫è:Âå∫7ÁöÑÁ¨¨4Âè∑ÁõÆÁöÑÊ¨°Â∫èÂè∑(ÊúÄ‰Ωé‰Ωç)
1227   1          //Ê†πÊçÆÂΩ¢ÂèÇÁªü‰∏ÄÊ¨°Â∫è
1228   1          for(loc_xh1=4;loc_xh1>0;loc_xh1--){
1229   2                   if((loc_data[0][loc_xh1][0]==loc_data[3][1][0])&&(loc_data[0][loc_xh1][0]!=0))
1230   2                  loc_data[0][loc_xh1][1]=loc_data[3][1][1];
1231   2              else if((loc_data[0][loc_xh1][0]==loc_data[3][2][0])&&(loc_data[0][loc_xh1][0]!=0))
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 21  

1232   2                  loc_data[0][loc_xh1][1]=loc_data[3][2][1];
1233   2              else if((loc_data[0][loc_xh1][0]==loc_data[3][3][0])&&(loc_data[0][loc_xh1][0]!=0))
1234   2                  loc_data[0][loc_xh1][1]=loc_data[3][3][1];
1235   2              else if((loc_data[0][loc_xh1][0]==loc_data[3][4][0])&&(loc_data[0][loc_xh1][0]!=0))
1236   2                  loc_data[0][loc_xh1][1]=loc_data[3][4][1];
1237   2              else if((loc_data[0][loc_xh1][0]==loc_data[7][1][0])&&(loc_data[0][loc_xh1][0]!=0))
1238   2                  loc_data[0][loc_xh1][1]=loc_data[7][1][1];
1239   2              else if((loc_data[0][loc_xh1][0]==loc_data[7][2][0])&&(loc_data[0][loc_xh1][0]!=0))
1240   2                  loc_data[0][loc_xh1][1]=loc_data[7][2][1];
1241   2              else if((loc_data[0][loc_xh1][0]==loc_data[7][3][0])&&(loc_data[0][loc_xh1][0]!=0))
1242   2                  loc_data[0][loc_xh1][1]=loc_data[7][3][1];
1243   2              else if((loc_data[0][loc_xh1][0]==loc_data[7][4][0])&&(loc_data[0][loc_xh1][0]!=0))
1244   2                  loc_data[0][loc_xh1][1]=loc_data[7][4][1];
1245   2      
1246   2                   if((loc_data[4][loc_xh1][0]==loc_data[3][1][0])&&(loc_data[4][loc_xh1][0]!=0))
1247   2                  loc_data[4][loc_xh1][1]=loc_data[3][1][1];
1248   2              else if((loc_data[4][loc_xh1][0]==loc_data[3][2][0])&&(loc_data[4][loc_xh1][0]!=0))
1249   2                  loc_data[4][loc_xh1][1]=loc_data[3][2][1];
1250   2              else if((loc_data[4][loc_xh1][0]==loc_data[3][3][0])&&(loc_data[4][loc_xh1][0]!=0))
1251   2                  loc_data[4][loc_xh1][1]=loc_data[3][3][1];
1252   2              else if((loc_data[4][loc_xh1][0]==loc_data[3][4][0])&&(loc_data[4][loc_xh1][0]!=0))
1253   2                  loc_data[4][loc_xh1][1]=loc_data[3][4][1];
1254   2              else if((loc_data[4][loc_xh1][0]==loc_data[7][1][0])&&(loc_data[4][loc_xh1][0]!=0))
1255   2                  loc_data[4][loc_xh1][1]=loc_data[7][1][1];
1256   2              else if((loc_data[4][loc_xh1][0]==loc_data[7][2][0])&&(loc_data[4][loc_xh1][0]!=0))
1257   2                  loc_data[4][loc_xh1][1]=loc_data[7][2][1];
1258   2              else if((loc_data[4][loc_xh1][0]==loc_data[7][3][0])&&(loc_data[4][loc_xh1][0]!=0))
1259   2                  loc_data[4][loc_xh1][1]=loc_data[7][3][1];
1260   2              else if((loc_data[4][loc_xh1][0]==loc_data[7][4][0])&&(loc_data[4][loc_xh1][0]!=0))
1261   2                  loc_data[4][loc_xh1][1]=loc_data[7][4][1];
1262   2          }
1263   1          //Ê∏ÖÁ©∫ÂΩ¢ÂèÇË°®(ÂÆûÈôÖ‰ª∂Â∫è)
1264   1          for(loc_xh1=0;loc_xh1<=7;loc_xh1++)
1265   1              for(loc_xh2=0;loc_xh2<=4;loc_xh2++)
1266   1                  loc_data[loc_xh1][loc_xh2][0]=0;
1267   1          //ËΩ¨Áßª04ÁöÑÂ∫èÂè∑
1268   1          for(loc_xh1=0;loc_xh1<=4;loc_xh1++){
1269   2              loc_data[0][loc_xh1][0]=loc_data[0][loc_xh1][1];
1270   2              loc_data[4][loc_xh1][0]=loc_data[4][loc_xh1][1];
1271   2          }
1272   1          //ÁõÆÁöÑÂå∫Èô§‰∫Ü3.7Âå∫ÂÖ®ÈÉ®Ê∏ÖÈõ∂
1273   1          for(loc_xh1=0;loc_xh1<=4;loc_xh1++){
1274   2              loc_data[0][loc_xh1][1]=0;
1275   2              loc_data[1][loc_xh1][1]=0;
1276   2              loc_data[2][loc_xh1][1]=0;
1277   2              loc_data[4][loc_xh1][1]=0;
1278   2              loc_data[5][loc_xh1][1]=0;
1279   2              loc_data[6][loc_xh1][1]=0;
1280   2          }
1281   1          //8‰∏™Âå∫ÁöÑÂæ™ÁéØ
1282   1          for(loc_xh1=0;loc_xh1<=7;loc_xh1++){
1283   2              loc_high[loc_xh1]=4;//ÈªòËÆ§‰∏∫Ê≤°Êúâ‰ª∂
1284   2              for(loc_xh2=0;loc_xh2<=4;loc_xh2++){//5‰∏™È´òÂ∫¶ÁöÑÂæ™ÁéØ
1285   3                  if(loc_data[loc_xh1][loc_xh2][0]!=0){//Â¶ÇÊûúÊîæ‰∫Ü‰ª∂‰∫Ü
1286   4                      loc_high[loc_xh1]=loc_xh2-1;//ËÆ∞ÂΩïËøô‰∏™Âå∫ÊúÄÈ´òÁ©∫Èó≤‰ΩçÁΩÆ
1287   4                      break;//ÁªßÁª≠Âå∫ÁöÑÂæ™ÁéØ
1288   4                  }
1289   3              }
1290   2          }
1291   1      
1292   1          fun_sj1(sjp_wz1);
1293   1          fun_sz1(han_s);
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 22  

1294   1      
1295   1          while(1){
1296   2              loc_high03=fun_min4(loc_high[0],loc_high[1],loc_high[2],loc_high[3]);
1297   2              loc_high47=fun_min4(loc_high[4],loc_high[5],loc_high[6],loc_high[7]);
1298   2              loc_high07=fun_min2(loc_high03,loc_high47);
1299   2              if(str_begin.hzfx==dir_left){
1300   3                  if(loc_high[0]<4){//Â¶ÇÊûúÂå∫0Êúâ‰ª∂
1301   4                      if(loc_data[0][loc_high[0]+1][0]==loc_data[3][loc_high[3]][1]){//Â¶ÇÊûúÂå∫0ÊúÄÈ´ò‰ΩçÁ≠â‰∫é
             -Âå∫3ÊúÄÈ´ò‰Ωç‰ª∂
1302   5                          fun_sj1zt(loc_high03);//‰∏äÂçáÂà∞03ÊñπÊúÄÈ´ò‰Ωç
1303   5                          fun_pyhz2(tra_h,dir_left);//Êäì‰ª∂‰ΩçÁΩÆ0
1304   5                          fun_sj1zt(loc_high[0]+1);//‰∏ãÈôçÂà∞Âå∫0ÊúÄÈ´ò‰Ωç
1305   5                          fun_sz1(han_j);//Êäì‰ª∂
1306   5                          fun_sj1zt(loc_high03);//‰∏äÂçáÂà∞03ÊñπÊúÄÈ´ò‰Ωç
1307   5                          fun_pyhz2(tra_q,dir_left);//Êäì‰ª∂‰ΩçÁΩÆ3
1308   5                          fun_sj1zt(loc_high[3]);//‰∏ãÈôçÂà∞Âå∫3ÊúÄÈ´ò‰Ωç
1309   5                          fun_sz1(han_s);//Êùæ‰ª∂
1310   5      
1311   5                          loc_data[3][loc_high[3]+1][0]=loc_data[0][loc_high[0]+1][0];//‰ª∂Â∑≤Áªè‰ªé0Âå∫ÊãøÂà∞‰∫
             -Ü3Âå∫
1312   5                          loc_data[0][loc_high[0]+1][0]=0;//0Âå∫Êú®Êúâ‰∫Ü
1313   5                          loc_high[0]++;//Êõ¥Êñ∞Âå∫0ÊúÄÈ´ò‰Ωç
1314   5                          loc_high[3]--;//Êõ¥Êñ∞Âå∫3ÊúÄÈ´ò‰Ωç
1315   5                      }
1316   4                      else if(loc_data[0][loc_high[0]+1][0]==loc_data[7][loc_high[7]][1]){//Â¶ÇÊûúÂå∫0ÊúÄÈ´ò‰ΩçÁ
             -≠â‰∫éÂå∫7ÊúÄÈ´ò‰Ωç‰ª∂
1317   5                          fun_sj1zt(loc_high03);//‰∏äÂçáÂà∞03ÊñπÊúÄÈ´ò‰Ωç
1318   5                          fun_pyhz2(tra_h,dir_left);//Êäì‰ª∂‰ΩçÁΩÆ0
1319   5                          fun_sj1zt(loc_high[0]+1);//‰∏ãÈôçÂà∞Âå∫0ÊúÄÈ´ò‰Ωç
1320   5                          fun_sz1(han_j);//Êäì‰ª∂
1321   5                          fun_sj1zt(loc_high07);//‰∏äÂçáÂà∞07ÊñπÊúÄÈ´ò‰Ωç
1322   5                          fun_pyhz2(tra_h,dir_right);//Êäì‰ª∂‰ΩçÁΩÆ7
1323   5                          fun_sj1zt(loc_high[7]);//‰∏ãÈôçÂà∞Âå∫7ÊúÄÈ´ò‰Ωç
1324   5                          fun_sz1(han_s);//Êùæ‰ª∂
1325   5      
1326   5                          loc_data[7][loc_high[7]+1][0]=loc_data[0][loc_high[0]+1][0];//‰ª∂Â∑≤Áªè‰ªé0Âå∫ÊãøÂà∞‰∫
             -Ü7Âå∫
1327   5                          loc_data[0][loc_high[0]+1][0]=0;//0Âå∫Êú®Êúâ‰∫Ü
1328   5                          loc_high[0]++;//Êõ¥Êñ∞Âå∫0ÊúÄÈ´ò‰Ωç
1329   5                          loc_high[7]--;//Êõ¥Êñ∞Âå∫7ÊúÄÈ´ò‰Ωç
1330   5                      }
1331   4                      else{
1332   5                          if((loc_high[1]>=4)||(loc_data[0][loc_high[0]+1][0]>loc_data[1][loc_high[1]][0])){//Â¶
             -ÇÊûúÂå∫1ËÉΩÊîæÂæó‰∏ã,ÊîæÂú®Âå∫1
1333   6                              fun_sj1zt(loc_high03);//‰∏äÂçáÂà∞03ÊñπÊúÄÈ´ò‰Ωç
1334   6                              fun_pyhz2(tra_h,dir_left);//Êäì‰ª∂‰ΩçÁΩÆ0
1335   6                              fun_sj1zt(loc_high[0]+1);//‰∏ãÈôçÂà∞Âå∫0ÊúÄÈ´ò‰Ωç
1336   6                              fun_sz1(han_j);//Êäì‰ª∂
1337   6                              fun_sj1zt(loc_high03);//‰∏äÂçáÂà∞03ÊñπÊúÄÈ´ò‰Ωç
1338   6                              fun_pyhz2(tra_kh,dir_left);//Êäì‰ª∂‰ΩçÁΩÆ1
1339   6                              fun_sj1zt(loc_high[1]);//‰∏ãÈôçÂà∞Âå∫1ÊúÄÈ´ò‰Ωç
1340   6                              fun_sz1(han_s);//Êùæ‰ª∂
1341   6      
1342   6                              loc_data[1][loc_high[1]+1][0]=loc_data[0][loc_high[0]+1][0];//‰ª∂Â∑≤Áªè‰ªé0Âå∫ÊãøÂ
             -à∞‰∫Ü3Âå∫
1343   6                              loc_data[0][loc_high[0]+1][0]=0;//0Âå∫Êú®Êúâ‰∫Ü
1344   6                              loc_high[0]++;//Êõ¥Êñ∞Âå∫0ÊúÄÈ´ò‰Ωç
1345   6                              loc_high[1]--;//Êõ¥Êñ∞Âå∫3ÊúÄÈ´ò‰Ωç
1346   6                          }
1347   5                          else{//Âê¶ÂàôÊîæÂú®Âå∫2
1348   6                              fun_sj1zt(loc_high03);//‰∏äÂçáÂà∞03ÊñπÊúÄÈ´ò‰Ωç
1349   6                              fun_pyhz2(tra_h,dir_left);//Êäì‰ª∂‰ΩçÁΩÆ0
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 23  

1350   6                              fun_sj1zt(loc_high[0]+1);//‰∏ãÈôçÂà∞Âå∫0ÊúÄÈ´ò‰Ωç
1351   6                              fun_sz1(han_j);//Êäì‰ª∂
1352   6                              fun_sj1zt(loc_high03);//‰∏äÂçáÂà∞03ÊñπÊúÄÈ´ò‰Ωç
1353   6                              fun_pyhz2(tra_kq,dir_left);//Êäì‰ª∂‰ΩçÁΩÆ2
1354   6                              fun_sj1zt(loc_high[2]);//‰∏ãÈôçÂà∞Âå∫2ÊúÄÈ´ò‰Ωç
1355   6                              fun_sz1(han_s);//Êùæ‰ª∂
1356   6      
1357   6                              loc_data[2][loc_high[2]+1][0]=loc_data[0][loc_high[0]+1][0];//‰ª∂Â∑≤Áªè‰ªé0Âå∫ÊãøÂ
             -à∞‰∫Ü3Âå∫
1358   6                              loc_data[0][loc_high[0]+1][0]=0;//0Âå∫Êú®Êúâ‰∫Ü
1359   6                              loc_high[0]++;//Êõ¥Êñ∞Âå∫0ÊúÄÈ´ò‰Ωç
1360   6                              loc_high[2]--;//Êõ¥Êñ∞Âå∫3ÊúÄÈ´ò‰Ωç
1361   6                          }
1362   5                      }
1363   4                  }
1364   3                  else if(loc_high[1]<4){//Â¶ÇÊûúÂå∫1Êúâ‰ª∂
1365   4                      if(loc_data[1][loc_high[1]+1][0]==loc_data[3][loc_high[3]][1]){//Â¶ÇÊûúÂå∫1ÊúÄÈ´ò‰ΩçÁ≠â‰∫é
             -Âå∫3ÊúÄÈ´ò‰Ωç‰ª∂
1366   5                          fun_sj1zt(loc_high03);//‰∏äÂçáÂà∞03ÊñπÊúÄÈ´ò‰Ωç
1367   5                          fun_pyhz2(tra_kh,dir_left);//Êäì‰ª∂‰ΩçÁΩÆ1
1368   5                          fun_sj1zt(loc_high[1]+1);//‰∏ãÈôçÂà∞Âå∫1ÊúÄÈ´ò‰Ωç
1369   5                          fun_sz1(han_j);//Êäì‰ª∂
1370   5                          fun_sj1zt(loc_high03);//‰∏äÂçáÂà∞03ÊñπÊúÄÈ´ò‰Ωç
1371   5                          fun_pyhz2(tra_q,dir_left);//Êäì‰ª∂‰ΩçÁΩÆ2
1372   5                          fun_sj1zt(loc_high[3]);//‰∏ãÈôçÂà∞Âå∫2ÊúÄÈ´ò‰Ωç
1373   5                          fun_sz1(han_s);//Êùæ‰ª∂
1374   5      
1375   5                          loc_data[3][loc_high[3]+1][0]=loc_data[1][loc_high[1]+1][0];//‰ª∂Â∑≤Áªè‰ªé1Âå∫ÊãøÂà∞‰∫
             -Ü3Âå∫
1376   5                          loc_data[1][loc_high[1]+1][0]=0;//1Âå∫Êú®Êúâ‰∫Ü
1377   5                          loc_high[1]++;//Êõ¥Êñ∞Âå∫1ÊúÄÈ´ò‰Ωç
1378   5                          loc_high[3]--;//Êõ¥Êñ∞Âå∫3ÊúÄÈ´ò‰Ωç
1379   5                      }
1380   4                      else if(loc_data[1][loc_high[1]+1][0]==loc_data[7][loc_high[7]][1]){//Â¶ÇÊûúÂå∫1ÊúÄÈ´ò‰ΩçÁ
             -≠â‰∫éÂå∫7ÊúÄÈ´ò‰Ωç‰ª∂
1381   5                          fun_sj1zt(loc_high03);//‰∏äÂçáÂà∞03ÊñπÊúÄÈ´ò‰Ωç
1382   5                          fun_pyhz2(tra_kh,dir_left);//Êäì‰ª∂‰ΩçÁΩÆ1
1383   5                          fun_sj1zt(loc_high[1]+1);//‰∏ãÈôçÂà∞Âå∫1ÊúÄÈ´ò‰Ωç
1384   5                          fun_sz1(han_j);//Êäì‰ª∂
1385   5                          fun_sj1zt(loc_high07);//‰∏äÂçáÂà∞07ÊñπÊúÄÈ´ò‰Ωç
1386   5                          fun_pyhz2(tra_h,dir_right);//Êäì‰ª∂‰ΩçÁΩÆ7
1387   5                          fun_sj1zt(loc_high[7]);//‰∏ãÈôçÂà∞Âå∫7ÊúÄÈ´ò‰Ωç
1388   5                          fun_sz1(han_s);//Êùæ‰ª∂
1389   5      
1390   5                          loc_data[7][loc_high[7]+1][0]=loc_data[1][loc_high[1]+1][0];//‰ª∂Â∑≤Áªè‰ªé1Âå∫ÊãøÂà∞‰∫
             -Ü7Âå∫
1391   5                          loc_data[1][loc_high[1]+1][0]=0;//1Âå∫Êú®Êúâ‰∫Ü
1392   5                          loc_high[1]++;//Êõ¥Êñ∞Âå∫1ÊúÄÈ´ò‰Ωç
1393   5                          loc_high[7]--;//Êõ¥Êñ∞Âå∫3ÊúÄÈ´ò‰Ωç
1394   5                      }
1395   4                      else if(loc_data[1][loc_high[1]+1][0]>loc_data[2][loc_high[2]][0]){//Â¶ÇÊûúÂå∫2ËÉΩÊîæÂæó‰∏
             -ã,ÊîæÂú®Âå∫2
1396   5                          fun_sj1zt(loc_high03);//‰∏äÂçáÂà∞03ÊñπÊúÄÈ´ò‰Ωç
1397   5                          fun_pyhz2(tra_kh,dir_left);//Êäì‰ª∂‰ΩçÁΩÆ1
1398   5                          fun_sj1zt(loc_high[1]+1);//‰∏ãÈôçÂà∞Âå∫1ÊúÄÈ´ò‰Ωç
1399   5                          fun_sz1(han_j);//Êäì‰ª∂
1400   5                          fun_sj1zt(loc_high03);//‰∏äÂçáÂà∞03ÊñπÊúÄÈ´ò‰Ωç
1401   5                          fun_pyhz2(tra_kq,dir_left);//Êäì‰ª∂‰ΩçÁΩÆ2
1402   5                          fun_sj1zt(loc_high[2]);//‰∏ãÈôçÂà∞Âå∫2ÊúÄÈ´ò‰Ωç
1403   5                          fun_sz1(han_s);//Êùæ‰ª∂
1404   5      
1405   5                          loc_data[2][loc_high[2]+1][0]=loc_data[1][loc_high[1]+1][0];//‰ª∂Â∑≤Áªè‰ªé1Âå∫ÊãøÂà∞‰∫
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 24  

             -Ü2Âå∫
1406   5                          loc_data[1][loc_high[1]+1][0]=0;//1Âå∫Êú®Êúâ‰∫Ü
1407   5                          loc_high[1]++;//Êõ¥Êñ∞Âå∫1ÊúÄÈ´ò‰Ωç
1408   5                          loc_high[2]--;//Êõ¥Êñ∞Âå∫3ÊúÄÈ´ò‰Ωç
1409   5                      }
1410   4                  }
1411   3                  else if(loc_high[2]<4){//Â¶ÇÊûúÂå∫2Êúâ‰ª∂
1412   4                      if(loc_data[2][loc_high[2]+1][0]==loc_data[3][loc_high[3]][1]){//Â¶ÇÊûúÂå∫2ÊúÄÈ´ò‰ΩçÁ≠â‰∫é
             -Âå∫3ÊúÄÈ´ò‰Ωç‰ª∂
1413   5                          fun_sj1zt(loc_high03);//‰∏äÂçáÂà∞03ÊñπÊúÄÈ´ò‰Ωç
1414   5                          fun_pyhz2(tra_kq,dir_left);//Êäì‰ª∂‰ΩçÁΩÆ2
1415   5                          fun_sj1zt(loc_high[2]+1);//‰∏ãÈôçÂà∞Âå∫2ÊúÄÈ´ò‰Ωç
1416   5                          fun_sz1(han_j);//Êäì‰ª∂
1417   5                          fun_sj1zt(loc_high03);//‰∏äÂçáÂà∞03ÊñπÊúÄÈ´ò‰Ωç
1418   5                          fun_pyhz2(tra_q,dir_left);//Êäì‰ª∂‰ΩçÁΩÆ3
1419   5                          fun_sj1zt(loc_high[2]);//‰∏ãÈôçÂà∞Âå∫3ÊúÄÈ´ò‰Ωç
1420   5                          fun_sz1(han_s);//Êùæ‰ª∂
1421   5      
1422   5                          loc_data[3][loc_high[3]+1][0]=loc_data[2][loc_high[2]+1][0];//‰ª∂Â∑≤Áªè‰ªé2Âå∫ÊãøÂà∞‰∫
             -Ü3Âå∫
1423   5                          loc_data[2][loc_high[2]+1][0]=0;//2Âå∫Êú®Êúâ‰∫Ü
1424   5                          loc_high[2]++;//Êõ¥Êñ∞Âå∫2ÊúÄÈ´ò‰Ωç
1425   5                          loc_high[3]--;//Êõ¥Êñ∞Âå∫3ÊúÄÈ´ò‰Ωç
1426   5                      }
1427   4                      else if(loc_data[2][loc_high[2]+1][0]==loc_data[7][loc_high[7]][1]){//Â¶ÇÊûúÂå∫2ÊúÄÈ´ò‰ΩçÁ
             -≠â‰∫éÂå∫7ÊúÄÈ´ò‰Ωç‰ª∂
1428   5                          fun_sj1zt(loc_high03);//‰∏äÂçáÂà∞03ÊñπÊúÄÈ´ò‰Ωç
1429   5                          fun_pyhz2(tra_kq,dir_left);//Êäì‰ª∂‰ΩçÁΩÆ2
1430   5                          fun_sj1zt(loc_high[2]+1);//‰∏ãÈôçÂà∞Âå∫2ÊúÄÈ´ò‰Ωç
1431   5                          fun_sz1(han_j);//Êäì‰ª∂
1432   5                          fun_sj1zt(loc_high07);//‰∏äÂçáÂà∞07ÊñπÊúÄÈ´ò‰Ωç
1433   5                          fun_pyhz2(tra_h,dir_right);//Êäì‰ª∂‰ΩçÁΩÆ7
1434   5                          fun_sj1zt(loc_high[7]);//‰∏ãÈôçÂà∞Âå∫7ÊúÄÈ´ò‰Ωç
1435   5                          fun_sz1(han_s);//Êùæ‰ª∂
1436   5      
1437   5                          loc_data[7][loc_high[7]+1][0]=loc_data[2][loc_high[2]+1][0];//‰ª∂Â∑≤Áªè‰ªé2Âå∫ÊãøÂà∞‰∫
             -Ü7Âå∫
1438   5                          loc_data[2][loc_high[2]+1][0]=0;//2Âå∫Êú®Êúâ‰∫Ü
1439   5                          loc_high[2]++;//Êõ¥Êñ∞Âå∫2ÊúÄÈ´ò‰Ωç
1440   5                          loc_high[7]--;//Êõ¥Êñ∞Âå∫7ÊúÄÈ´ò‰Ωç
1441   5                      }
1442   4                  }
1443   3                  if((loc_data[3][4][0]==loc_data[3][4][1])&&
1444   3                     (loc_data[3][3][0]==loc_data[3][3][1])&&
1445   3                     (loc_data[3][2][0]==loc_data[3][2][1])&&
1446   3                     (loc_data[3][1][0]==loc_data[3][1][1])){
1447   4                      if((loc_data[7][4][0]==loc_data[7][4][1])&&
1448   4                         (loc_data[7][3][0]==loc_data[7][3][1])&&
1449   4                         (loc_data[7][2][0]==loc_data[7][2][1])&&
1450   4                         (loc_data[7][1][0]==loc_data[7][1][1])){
1451   5                          return;
1452   5                      }
1453   4                      else
1454   4                          fun_hz1(dir_right);
1455   4                  }
1456   3              }
1457   2              else if(str_begin.hzfx==dir_right){
1458   3                  if(loc_high[4]<4){//Â¶ÇÊûúÂå∫4Êúâ‰ª∂
1459   4                      if(loc_data[4][loc_high[4]+1][0]==loc_data[7][loc_high[7]][1]){//Â¶ÇÊûúÂå∫4ÊúÄÈ´ò‰ΩçÁ≠â‰∫é
             -Âå∫7ÊúÄÈ´ò‰Ωç‰ª∂
1460   5                          fun_sj1zt(loc_high47);//‰∏äÂçáÂà∞47ÊñπÊúÄÈ´ò‰Ωç
1461   5                          fun_pyhz2(tra_q,dir_right);//Êäì‰ª∂‰ΩçÁΩÆ4
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 25  

1462   5                          fun_sj1zt(loc_high[4]+1);//‰∏ãÈôçÂà∞Âå∫4ÊúÄÈ´ò‰Ωç
1463   5                          fun_sz1(han_j);//Êäì‰ª∂
1464   5                          fun_sj1zt(loc_high47);//‰∏äÂçáÂà∞47ÊñπÊúÄÈ´ò‰Ωç
1465   5                          fun_pyhz2(tra_h,dir_right);//Êäì‰ª∂‰ΩçÁΩÆ7
1466   5                          fun_sj1zt(loc_high[7]);//‰∏ãÈôçÂà∞Âå∫7ÊúÄÈ´ò‰Ωç
1467   5                          fun_sz1(han_s);//Êùæ‰ª∂
1468   5      
1469   5                          loc_data[7][loc_high[7]+1][0]=loc_data[4][loc_high[4]+1][0];//‰ª∂Â∑≤Áªè‰ªé4Âå∫ÊãøÂà∞‰∫
             -Ü7Âå∫
1470   5                          loc_data[4][loc_high[4]+1][0]=0;//4Âå∫Êú®Êúâ‰∫Ü
1471   5                          loc_high[4]++;//Êõ¥Êñ∞Âå∫4ÊúÄÈ´ò‰Ωç
1472   5                          loc_high[7]--;//Êõ¥Êñ∞Âå∫7ÊúÄÈ´ò‰Ωç
1473   5                      }
1474   4                      else if(loc_data[4][loc_high[4]+1][0]==loc_data[3][loc_high[3]][1]){//Â¶ÇÊûúÂå∫4ÊúÄÈ´ò‰ΩçÁ
             -≠â‰∫éÂå∫3ÊúÄÈ´ò‰Ωç‰ª∂
1475   5                          fun_sj1zt(loc_high47);//‰∏äÂçáÂà∞47ÊñπÊúÄÈ´ò‰Ωç
1476   5                          fun_pyhz2(tra_q,dir_right);//Êäì‰ª∂‰ΩçÁΩÆ4
1477   5                          fun_sj1zt(loc_high[4]+1);//‰∏ãÈôçÂà∞Âå∫4ÊúÄÈ´ò‰Ωç
1478   5                          fun_sz1(han_j);//Êäì‰ª∂
1479   5                          fun_sj1zt(loc_high07);//‰∏äÂçáÂà∞07ÊñπÊúÄÈ´ò‰Ωç
1480   5                          fun_pyhz2(tra_q,dir_left);//Êäì‰ª∂‰ΩçÁΩÆ3
1481   5                          fun_sj1zt(loc_high[3]);//‰∏ãÈôçÂà∞Âå∫3ÊúÄÈ´ò‰Ωç
1482   5                          fun_sz1(han_s);//Êùæ‰ª∂
1483   5      
1484   5                          loc_data[3][loc_high[3]+1][0]=loc_data[4][loc_high[4]+1][0];//‰ª∂Â∑≤Áªè‰ªé4Âå∫ÊãøÂà∞‰∫
             -Ü3Âå∫
1485   5                          loc_data[4][loc_high[4]+1][0]=0;//4Âå∫Êú®Êúâ‰∫Ü
1486   5                          loc_high[4]++;//Êõ¥Êñ∞Âå∫4ÊúÄÈ´ò‰Ωç
1487   5                          loc_high[3]--;//Êõ¥Êñ∞Âå∫7ÊúÄÈ´ò‰Ωç
1488   5                      }
1489   4                      else{
1490   5                          if((loc_high[6]>=4)||(loc_data[4][loc_high[4]+1][0]>loc_data[6][loc_high[6]][0])){//Â¶
             -ÇÊûúÂå∫6ËÉΩÊîæÂæó‰∏ã,ÊîæÂú®Âå∫6
1491   6                              fun_sj1zt(loc_high47);//‰∏äÂçáÂà∞47ÊñπÊúÄÈ´ò‰Ωç
1492   6                              fun_pyhz2(tra_q,dir_right);//Êäì‰ª∂‰ΩçÁΩÆ4
1493   6                              fun_sj1zt(loc_high[4]+1);//‰∏ãÈôçÂà∞Âå∫4ÊúÄÈ´ò‰Ωç
1494   6                              fun_sz1(han_j);//Êäì‰ª∂
1495   6                              fun_sj1zt(loc_high07);//‰∏äÂçáÂà∞07ÊñπÊúÄÈ´ò‰Ωç
1496   6                              fun_pyhz2(tra_kq,dir_right);//Êäì‰ª∂‰ΩçÁΩÆ6
1497   6                              fun_sj1zt(loc_high[6]);//‰∏ãÈôçÂà∞Âå∫6ÊúÄÈ´ò‰Ωç
1498   6                              fun_sz1(han_s);//Êùæ‰ª∂
1499   6      
1500   6                              loc_data[6][loc_high[6]+1][0]=loc_data[4][loc_high[4]+1][0];//‰ª∂Â∑≤Áªè‰ªé4Âå∫ÊãøÂ
             -à∞‰∫Ü6Âå∫
1501   6                              loc_data[4][loc_high[4]+1][0]=0;//4Âå∫Êú®Êúâ‰∫Ü
1502   6                              loc_high[4]++;//Êõ¥Êñ∞Âå∫4ÊúÄÈ´ò‰Ωç
1503   6                              loc_high[6]--;//Êõ¥Êñ∞Âå∫6ÊúÄÈ´ò‰Ωç
1504   6                          }
1505   5                          else{//Âê¶ÂàôÊîæÂú®Âå∫5
1506   6                              fun_sj1zt(loc_high47);//‰∏äÂçáÂà∞47ÊñπÊúÄÈ´ò‰Ωç
1507   6                              fun_pyhz2(tra_q,dir_right);//Êäì‰ª∂‰ΩçÁΩÆ4
1508   6                              fun_sj1zt(loc_high[4]+1);//‰∏ãÈôçÂà∞Âå∫4ÊúÄÈ´ò‰Ωç
1509   6                              fun_sz1(han_j);//Êäì‰ª∂
1510   6                              fun_sj1zt(loc_high47);//‰∏äÂçáÂà∞47ÊñπÊúÄÈ´ò‰Ωç
1511   6                              fun_pyhz2(tra_kq,dir_right);//Êäì‰ª∂‰ΩçÁΩÆ2
1512   6                              fun_sj1zt(loc_high[5]);//‰∏ãÈôçÂà∞Âå∫5ÊúÄÈ´ò‰Ωç
1513   6                              fun_sz1(han_s);//Êùæ‰ª∂
1514   6      
1515   6                              loc_data[5][loc_high[5]+1][0]=loc_data[4][loc_high[4]+1][0];//‰ª∂Â∑≤Áªè‰ªé4Âå∫ÊãøÂ
             -à∞‰∫Ü5Âå∫
1516   6                              loc_data[4][loc_high[4]+1][0]=0;//4Âå∫Êú®Êúâ‰∫Ü
1517   6                              loc_high[4]++;//Êõ¥Êñ∞Âå∫4ÊúÄÈ´ò‰Ωç
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 26  

1518   6                              loc_high[5]--;//Êõ¥Êñ∞Âå∫6ÊúÄÈ´ò‰Ωç
1519   6                          }
1520   5                      }
1521   4                  }
1522   3                  else if(loc_high[5]<4){//Â¶ÇÊûúÂå∫5Êúâ‰ª∂
1523   4                      if(loc_data[5][loc_high[5]+1][0]==loc_data[7][loc_high[7]][1]){//Â¶ÇÊûúÂå∫5ÊúÄÈ´ò‰ΩçÁ≠â‰∫é
             -Âå∫7ÊúÄÈ´ò‰Ωç‰ª∂
1524   5                          fun_sj1zt(loc_high47);//‰∏äÂçáÂà∞47ÊñπÊúÄÈ´ò‰Ωç
1525   5                          fun_pyhz2(tra_kq,dir_right);//Êäì‰ª∂‰ΩçÁΩÆ5
1526   5                          fun_sj1zt(loc_high[5]+1);//‰∏ãÈôçÂà∞Âå∫5ÊúÄÈ´ò‰Ωç
1527   5                          fun_sz1(han_j);//Êäì‰ª∂
1528   5                          fun_sj1zt(loc_high47);//‰∏äÂçáÂà∞47ÊñπÊúÄÈ´ò‰Ωç
1529   5                          fun_pyhz2(tra_h,dir_right);//Êäì‰ª∂‰ΩçÁΩÆ2
1530   5                          fun_sj1zt(loc_high[7]);//‰∏ãÈôçÂà∞Âå∫7ÊúÄÈ´ò‰Ωç
1531   5                          fun_sz1(han_s);//Êùæ‰ª∂
1532   5      
1533   5                          loc_data[7][loc_high[7]+1][0]=loc_data[5][loc_high[5]+1][0];//‰ª∂Â∑≤Áªè‰ªé5Âå∫ÊãøÂà∞‰∫
             -Ü7Âå∫
1534   5                          loc_data[5][loc_high[5]+1][0]=0;//5Âå∫Êú®Êúâ‰∫Ü
1535   5                          loc_high[5]++;//Êõ¥Êñ∞Âå∫5ÊúÄÈ´ò‰Ωç
1536   5                          loc_high[7]--;//Êõ¥Êñ∞Âå∫7ÊúÄÈ´ò‰Ωç
1537   5                      }
1538   4                      else if(loc_data[5][loc_high[5]+1][0]==loc_data[3][loc_high[3]][1]){//Â¶ÇÊûúÂå∫5ÊúÄÈ´ò‰ΩçÁ
             -≠â‰∫éÂå∫3ÊúÄÈ´ò‰Ωç‰ª∂
1539   5                          fun_sj1zt(loc_high47);//‰∏äÂçáÂà∞47ÊñπÊúÄÈ´ò‰Ωç
1540   5                          fun_pyhz2(tra_kq,dir_right);//Êäì‰ª∂‰ΩçÁΩÆ5
1541   5                          fun_sj1zt(loc_high[5]+1);//‰∏ãÈôçÂà∞Âå∫5ÊúÄÈ´ò‰Ωç
1542   5                          fun_sz1(han_j);//Êäì‰ª∂
1543   5                          fun_sj1zt(loc_high07);//‰∏äÂçáÂà∞07ÊñπÊúÄÈ´ò‰Ωç
1544   5                          fun_pyhz2(tra_q,dir_left);//Êäì‰ª∂‰ΩçÁΩÆ3
1545   5                          fun_sj1zt(loc_high[3]);//‰∏ãÈôçÂà∞Âå∫3ÊúÄÈ´ò‰Ωç
1546   5                          fun_sz1(han_s);//Êùæ‰ª∂
1547   5      
1548   5                          loc_data[3][loc_high[3]+1][0]=loc_data[5][loc_high[5]+1][0];//‰ª∂Â∑≤Áªè‰ªé5Âå∫ÊãøÂà∞‰∫
             -Ü3Âå∫
1549   5                          loc_data[5][loc_high[5]+1][0]=0;//5Âå∫Êú®Êúâ‰∫Ü
1550   5                          loc_high[5]++;//Êõ¥Êñ∞Âå∫5ÊúÄÈ´ò‰Ωç
1551   5                          loc_high[3]--;//Êõ¥Êñ∞Âå∫3ÊúÄÈ´ò‰Ωç
1552   5                      }
1553   4                      else if(loc_data[5][loc_high[5]+1][0]>loc_data[6][loc_high[6]][0]){//Â¶ÇÊûúÂå∫6ËÉΩÊîæÂæó‰∏
             -ã,ÊîæÂú®Âå∫6
1554   5                          fun_sj1zt(loc_high47);//‰∏äÂçáÂà∞47ÊñπÊúÄÈ´ò‰Ωç
1555   5                          fun_pyhz2(tra_kq,dir_right);//Êäì‰ª∂‰ΩçÁΩÆ5
1556   5                          fun_sj1zt(loc_high[5]+1);//‰∏ãÈôçÂà∞Âå∫5ÊúÄÈ´ò‰Ωç
1557   5                          fun_sz1(han_j);//Êäì‰ª∂
1558   5                          fun_sj1zt(loc_high47);//‰∏äÂçáÂà∞47ÊñπÊúÄÈ´ò‰Ωç
1559   5                          fun_pyhz2(tra_kh,dir_right);//Êäì‰ª∂‰ΩçÁΩÆ2
1560   5                          fun_sj1zt(loc_high[6]);//‰∏ãÈôçÂà∞Âå∫7ÊúÄÈ´ò‰Ωç
1561   5                          fun_sz1(han_s);//Êùæ‰ª∂
1562   5      
1563   5                          loc_data[6][loc_high[6]+1][0]=loc_data[5][loc_high[5]+1][0];//‰ª∂Â∑≤Áªè‰ªé5Âå∫ÊãøÂà∞‰∫
             -Ü6Âå∫
1564   5                          loc_data[5][loc_high[5]+1][0]=0;//5Âå∫Êú®Êúâ‰∫Ü
1565   5                          loc_high[5]++;//Êõ¥Êñ∞Âå∫5ÊúÄÈ´ò‰Ωç
1566   5                          loc_high[6]--;//Êõ¥Êñ∞Âå∫7ÊúÄÈ´ò‰Ωç
1567   5                      }
1568   4                  }
1569   3                  else if(loc_high[6]<4){//Â¶ÇÊûúÂå∫6Êúâ‰ª∂
1570   4                      if(loc_data[6][loc_high[6]+1][0]==loc_data[7][loc_high[7]][1]){//Â¶ÇÊûúÂå∫6ÊúÄÈ´ò‰ΩçÁ≠â‰∫é
             -Âå∫7ÊúÄÈ´ò‰Ωç‰ª∂
1571   5                          fun_sj1zt(loc_high47);//‰∏äÂçáÂà∞47ÊñπÊúÄÈ´ò‰Ωç
1572   5                          fun_pyhz2(tra_kh,dir_right);//Êäì‰ª∂‰ΩçÁΩÆ6
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 27  

1573   5                          fun_sj1zt(loc_high[6]+1);//‰∏ãÈôçÂà∞Âå∫6ÊúÄÈ´ò‰Ωç
1574   5                          fun_sz1(han_j);//Êäì‰ª∂
1575   5                          fun_sj1zt(loc_high47);//‰∏äÂçáÂà∞47ÊñπÊúÄÈ´ò‰Ωç
1576   5                          fun_pyhz2(tra_h,dir_right);//Êäì‰ª∂‰ΩçÁΩÆ7
1577   5                          fun_sj1zt(loc_high[7]);//‰∏ãÈôçÂà∞Âå∫7ÊúÄÈ´ò‰Ωç
1578   5                          fun_sz1(han_s);//Êùæ‰ª∂
1579   5      
1580   5                          loc_data[7][loc_high[7]+1][0]=loc_data[6][loc_high[6]+1][0];//‰ª∂Â∑≤Áªè‰ªé6Âå∫ÊãøÂà∞‰∫
             -Ü7Âå∫
1581   5                          loc_data[6][loc_high[6]+1][0]=0;//2Âå∫Êú®Êúâ‰∫Ü
1582   5                          loc_high[6]++;//Êõ¥Êñ∞Âå∫2ÊúÄÈ´ò‰Ωç
1583   5                          loc_high[7]--;//Êõ¥Êñ∞Âå∫7ÊúÄÈ´ò‰Ωç
1584   5                      }
1585   4                      else if(loc_data[6][loc_high[6]+1][0]==loc_data[3][loc_high[3]][1]){//Â¶ÇÊûúÂå∫6ÊúÄÈ´ò‰ΩçÁ
             -≠â‰∫éÂå∫3ÊúÄÈ´ò‰Ωç‰ª∂
1586   5                          fun_sj1zt(loc_high47);//‰∏äÂçáÂà∞47ÊñπÊúÄÈ´ò‰Ωç
1587   5                          fun_pyhz2(tra_kh,dir_right);//Êäì‰ª∂‰ΩçÁΩÆ6
1588   5                          fun_sj1zt(loc_high[6]+1);//‰∏ãÈôçÂà∞Âå∫6ÊúÄÈ´ò‰Ωç
1589   5                          fun_sz1(han_j);//Êäì‰ª∂
1590   5                          fun_sj1zt(loc_high47);//‰∏äÂçáÂà∞47ÊñπÊúÄÈ´ò‰Ωç
1591   5                          fun_pyhz2(tra_q,dir_left);//Êäì‰ª∂‰ΩçÁΩÆ3
1592   5                          fun_sj1zt(loc_high[3]);//‰∏ãÈôçÂà∞Âå∫7ÊúÄÈ´ò‰Ωç
1593   5                          fun_sz1(han_s);//Êùæ‰ª∂
1594   5      
1595   5                          loc_data[3][loc_high[3]+1][0]=loc_data[6][loc_high[6]+1][0];//‰ª∂Â∑≤Áªè‰ªé6Âå∫ÊãøÂà∞‰∫
             -Ü3Âå∫
1596   5                          loc_data[6][loc_high[6]+1][0]=0;//2Âå∫Êú®Êúâ‰∫Ü
1597   5                          loc_high[6]++;//Êõ¥Êñ∞Âå∫2ÊúÄÈ´ò‰Ωç
1598   5                          loc_high[3]--;//Êõ¥Êñ∞Âå∫7ÊúÄÈ´ò‰Ωç
1599   5                      }
1600   4                  }
1601   3                  if((loc_data[7][4][0]==loc_data[7][4][1])&&
1602   3                     (loc_data[7][3][0]==loc_data[7][3][1])&&
1603   3                     (loc_data[7][2][0]==loc_data[7][2][1])&&
1604   3                     (loc_data[7][1][0]==loc_data[7][1][1])){
1605   4                      if((loc_data[3][4][0]==loc_data[3][4][1])&&
1606   4                         (loc_data[3][3][0]==loc_data[3][3][1])&&
1607   4                         (loc_data[3][2][0]==loc_data[3][2][1])&&
1608   4                         (loc_data[3][1][0]==loc_data[3][1][1])){
1609   5                          return;
1610   5                      }
1611   4                      else
1612   4                          fun_hz1(dir_left);
1613   4                  }
1614   3              }
1615   2              else{
1616   3                  fun_hz1(dir_left);
1617   3              }
1618   2          }
1619   1      }//Ëá™Âä®ÊäìÂ•∏
1620          uc fun_min4(uc par_num1,uc par_num2,uc par_num3,uc par_num4){
1621   1          return 
1622   1          par_num1<par_num2?par_num1:par_num2<par_num2<par_num3?par_num2:par_num3?
1623   1          par_num1<par_num2?par_num1:par_num2<par_num3<par_num4?par_num3:par_num4?
1624   1          par_num1<par_num2?par_num1:par_num2:par_num3<par_num4?par_num3:par_num4:
1625   1          par_num2<par_num3?par_num2:par_num3<par_num3<par_num4?par_num3:par_num4?
1626   1          par_num2<par_num3?par_num2:par_num3:par_num3<par_num4?par_num3:par_num4;
1627   1      }//Ê±Ç4‰∏™Êï∞ÁöÑÊúÄÂ∞èÂÄº
1628          uc fun_min2(uc par_num1,uc par_num2){
1629   1          return 
1630   1          par_num1<par_num2?par_num1:par_num2;
1631   1      }//Ê±Ç2‰∏™Êï∞ÁöÑÊúÄÂ∞èÂÄº
C51 COMPILER V9.01   8023                                                                  03/07/2015 11:08:12 PAGE 28  

1632          void fun_sj1zt(uc par_value){
1633   1          switch(par_value){
1634   2              case 0:
1635   2                  fun_sj1(sjp_wz1);
1636   2                  break;
1637   2              case 1:
1638   2                  fun_sj1(sjp_wz2);
1639   2                  break;
1640   2              case 2:
1641   2                  fun_sj1(sjp_wz3);
1642   2                  break;
1643   2              case 3:
1644   2                  fun_sj1(sjp_wz4);
1645   2                  break;
1646   2              case 4:
1647   2                  fun_sj1(sjp_wz5);
1648   2                  break;
1649   2              default:
1650   2                  break;
1651   2          }
1652   1      }//Áä∂ÊÄÅÁöÑÂçáÈôçÂçïÊ≠•,Áî®Êù•ÈÖçÂêàËá™Âä®ÊäìÂ•∏
1653          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   8121    ----
   CONSTANT SIZE    =      5    ----
   XDATA SIZE       =     47      98
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2      33
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       1
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
